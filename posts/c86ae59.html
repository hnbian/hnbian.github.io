<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="2.7.3 - Ambari 告警信息总结, hnbian">
    <meta name="description" content="此文档真对 spark 2.7.3 版本的 ambari 告警信息进行总结:
1. 告警级别


告警级别
解释
说明



OK
ok
集群运行良好


WARNING
警告
集群指标到了一定阈值，需关注 The cluster indi">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-155985521-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'UA-155985521-1');
</script>


    <title>2.7.3 - Ambari 告警信息总结 | hnbian</title>
    <link rel="icon" type="image/png" href="https://images.hnbian.cn/FvNSAGx7xljxALFh8Fa2DPNFP-JB">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 7.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="stylesheet" href="/css/prism-okaidia.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><link rel="alternate" href="/atom.xml" title="hnbian" type="application/atom+xml">
</head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="https://images.hnbian.cn/FvNSAGx7xljxALFh8Fa2DPNFP-JB" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">hnbian</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="https://images.hnbian.cn/FvNSAGx7xljxALFh8Fa2DPNFP-JB" class="logo-img circle responsive-img">
        
        <div class="logo-name">hnbian</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/hnbian" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/hnbian" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://images.hnbian.cn/FlU0heRQpxXpyu2wIgTWGNfUfvaZ')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">2.7.3 - Ambari 告警信息总结</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/ambari/">
                                <span class="chip bg-color">ambari</span>
                            </a>
                        
                            <a href="/tags/exception/">
                                <span class="chip bg-color">exception</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/ambari/" class="post-category">
                                ambari
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-01-05
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>此文档真对 spark 2.7.3 版本的 ambari 告警信息进行总结:</p>
<h2 id="1-告警级别"><a href="#1-告警级别" class="headerlink" title="1. 告警级别"></a>1. 告警级别</h2><table>
<thead>
<tr>
<th align="left">告警级别</th>
<th align="left">解释</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">OK</td>
<td align="left">ok</td>
<td align="left">集群运行良好</td>
</tr>
<tr>
<td align="left">WARNING</td>
<td align="left">警告</td>
<td align="left">集群指标到了一定阈值，需关注 <br>The cluster indicator has reached a certain threshold and requires attention.</td>
</tr>
<tr>
<td align="left">CRITICAL</td>
<td align="left">危险</td>
<td align="left">集群的状态可能存在问题，需进行一定的处理 <br>There may be problems with the status of the cluster and certain processing is required.</td>
</tr>
<tr>
<td align="left">UNKNOWN</td>
<td align="left">未知</td>
<td align="left">状态未知 <br>Status unknown</td>
</tr>
<tr>
<td align="left">NONE</td>
<td align="left">无</td>
<td align="left">无</td>
</tr>
</tbody></table>
<h2 id="2-告警状态"><a href="#2-告警状态" class="headerlink" title="2. 告警状态"></a>2. 告警状态</h2><table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">用途</th>
<th align="left">告警级别</th>
<th align="left">阀值是否可配置</th>
<th align="left">单位</th>
</tr>
</thead>
<tbody><tr>
<td align="left">PORT</td>
<td align="left">用来监测机器上的一个端口是否可用</td>
<td align="left">OK，WARN, CRIT</td>
<td align="left">是</td>
<td align="left">秒</td>
</tr>
<tr>
<td align="left">METRIC</td>
<td align="left">用来监测 Metric 相关的配置属性</td>
<td align="left">OK，WARN, CRIT</td>
<td align="left">是</td>
<td align="left">变量</td>
</tr>
<tr>
<td align="left">AGGREGATE</td>
<td align="left">用于收集其他某些 Alert 的状态</td>
<td align="left">OK，WARN, CRIT</td>
<td align="left">是</td>
<td align="left">百分比</td>
</tr>
<tr>
<td align="left">WEB</td>
<td align="left">用于监测一个 WEB UI(URL)地址是否可用</td>
<td align="left">OK，WARN, CRIT</td>
<td align="left">否</td>
<td align="left">无</td>
</tr>
<tr>
<td align="left">SCRIPT</td>
<td align="left">Alert 的监测逻辑由一个自定义的 python 脚本执行</td>
<td align="left">OK，WARN, CRIT</td>
<td align="left">否</td>
<td align="left">无</td>
</tr>
</tbody></table>
<h2 id="3-告警类型"><a href="#3-告警类型" class="headerlink" title="3. 告警类型"></a>3. 告警类型</h2><p>报警状态如下；现对其进行解释说明</p>
<table>
<thead>
<tr>
<th align="left">字段</th>
<th align="left">解释</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Service</td>
<td align="left">服务，在其中可选具体组件以查看其告警状态</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Host</td>
<td align="left">主机id ，显示所告警的虚机id</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Status</td>
<td align="left">状态，如告警级别中所示，总分为5种</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">24-Hour</td>
<td align="left">告警时长</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Response</td>
<td align="left">响应，报警具体内容</td>
<td align="left"></td>
</tr>
</tbody></table>
<h2 id="4-HDFS-告警"><a href="#4-HDFS-告警" class="headerlink" title="4. HDFS 告警"></a>4. HDFS 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险<br>(CRITICAL)<br> 默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">HDFS Storage Capacity Usage(Weekly) <br>HDFS存储已使用量(每周)</td>
<td align="left">This service-level alert is triggered if the increase in storage capacity usage deviation has grown beyond the specified threshold within a week period. <br>一周内存储增量偏移值超过设定阈值则触发此服务级告警。</td>
<td align="left">20%</td>
</tr>
<tr>
<td align="left">DataNode Unmounted Data Dir <br>DataNode 未安装的数据目录</td>
<td align="left">This host-level alert is triggered if one of the data directories on a host was previously on a mount point and became unmounted. If the mount history file does not exist, then report an error if a host has one or more mounted data directories as well as one or more unmounted data directories on the root partition. This may indicate that a data directory is writing to the root partition, which is undesirable. <br>主机上有数据目录在原先挂载点上且未卸载，则触发此主机级告警。若安装历史文件不存在，主机有一个或这个挂载点或未挂载点数据目录在根分区上则报错。这意味着数据目录正在写入根分区，这是不可取的。</td>
<td align="left">2分钟</td>
</tr>
<tr>
<td align="left">JournalNode Web UI</td>
<td align="left">This host-level alert is triggered if the JournalNode Web UI is unreachable. <br>不能访问 JournalNode Web UI 时触发此主机级告警。</td>
<td align="left">Connection failed to {1} ({3})</td>
</tr>
<tr>
<td align="left">DataDode Process <br>DataNode进程</td>
<td align="left">This host-level alert is triggered if the individual DataNode processes cannot be established to be up and listening on the network. <br>不能启动单个NataNode进程及在网络上监听单个NataNode进程时触发此主机级告警。</td>
<td align="left">5</td>
</tr>
<tr>
<td align="left">DataNode Web UI</td>
<td align="left">This host-level alert is triggered if the DataNode Web UI is unreachable. <br>不能访问DataNode Web UI 时触发此主机级告警。</td>
<td align="left">Connection failed to {1} ({3})</td>
</tr>
<tr>
<td align="left">DataNode Storage <br>DataNode存储</td>
<td align="left">This host-level alert is triggered if storage capacity if full on the DataNode. It checks the DataNode JMX Servlet for the Capacity and Remaining properties. The threshold values are in percent. <br>NataNode上存储容量满时触发此主机级告警。会检查NataNode JMX服务上已存储和可存储容量。阈值以百分比形式展示。</td>
<td align="left">80%</td>
</tr>
<tr>
<td align="left">DataNode Heap Usage <br>DataNode堆使用情况</td>
<td align="left">This host-level alert is triggered if heap usage goes past thresholds on the DataNode. It checks the DataNode JMXServlet for the MemHeapUsedM and MemHeapMaxM properties. The threshold values are in percent. <br>NataNode上堆使用情况超过设定阈值时触发此主机级告警。会检查NataNode JMX服务中已使用堆及堆最大量情况。阈值以百分比形式展示。</td>
<td align="left">90%</td>
</tr>
<tr>
<td align="left">HDFS Pending Deletion Blocks <br>HDFS所挂起的删除块</td>
<td align="left">This service-level alert is triggered if the number of blocks pending deletion in HDFS exceeds the configured warning and critical thresholds. It checks the NameNode JMX Servlet for the PendingDeletionBlock property. <br>HDFS中待删除块的量超过所配置的警告和告警阈值，则触发此服务级告警。会检查NameNode JMX 中的挂起的需删除块的数量。</td>
<td align="left">100000</td>
</tr>
<tr>
<td align="left">NameNode Client RPC Queue Latency(Daily)<br> NameNode客户端RPC队列延迟(每天)</td>
<td align="left">This service-level alert is triggered if the deviation of RPC latency on client port has grown beyond the specified threshold within a day period. <br>在一天中客户端接口的RPC延迟偏移量增长率超过设定阈值时触发此服务级告警。</td>
<td align="left">200%</td>
</tr>
<tr>
<td align="left">DataNode Health Summary <br>NataNode 健康状态</td>
<td align="left">This service-level alert is triggered if there are unhealthy DataNodes. <br>有不健康的NataNode时触发此服务级告警。</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">HDFS Upggade Finalized State<br> HDFS升级完成状态</td>
<td align="left">This service-level alert is triggered if HDFS is not in the finalized state. <br>HDFS不在完成状态时触发此服务级告警。</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">NameNode Client RPC Processing Latency(Daily)<br> NameNode客户端RPC进程延迟(每天)</td>
<td align="left">This service-level alert is triggered if the deviation of RPC latency on client port has grown beyond the specified threshold within a day period. <br>一天中客户端接口的RPC延迟增量增长率超过设定阈值时触发此服务级告警。</td>
<td align="left">200%</td>
</tr>
<tr>
<td align="left">NameNode Blocks Health <br>NameNode块健康状态</td>
<td align="left">This service-level alert is triggered if there are unhealthy DataNodes <br>有不健康的NataNode时触发此服务级告警。</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">NameNode Web UI</td>
<td align="left">NameNode Blocks Health NameNode块健康状态 <br>This host-level alert is triggered if the NameNode Web UI is unreachable. 不能访问NameNode Web UI 时触发此主机级告警。</td>
<td align="left">Connection failed to {1} ({3})</td>
</tr>
<tr>
<td align="left">NameNode Heap Usage (Daily) <br>NameNode堆使用(每天)</td>
<td align="left">This service-level alert is triggered if the NameNode heap usage deviation has grown beyond the specified threshold within a day period. 一天中NameNode堆使用增量增长率超过所设定阈值时触发此服务级告警。</td>
<td align="left">50%</td>
</tr>
<tr>
<td align="left">NameNode Last Checkpoint <br>NameNode最后检查</td>
<td align="left">This service-level alert will trigger if the last time that the NameNode performed a checkpoint was too long ago. It will also trigger if the number of uncommitted transactions is beyond a certain threshold. <br>距上次NameNode检查时间太长时触发此服务级告警。未提交事务超过某个阈值时也会触发此告警。</td>
<td align="left">200%</td>
</tr>
<tr>
<td align="left">NameNode RPC Latency <br>NameNode RPC延迟</td>
<td align="left">This host-level alert is triggered if the NameNode RPC latency exceeds the configured critical threshold. Typically an increase in the RPC processing time increases the RPC queue length, causing the average queue wait time to increase for NameNode operations. The threshold values are in milliseconds.<br> NameNode RPC延迟超过所设定阈值时触发此主机级告警。比较典型的是RPC进程时间增加会增加RPC队列长度，造成NameNode操作平均队列等待时间增长。阈值以毫秒级计。</td>
<td align="left">500</td>
</tr>
<tr>
<td align="left">HDFS Storage Capacity Usage(Daily) <br>HDFS存储使用量(每天)</td>
<td align="left">This service-level alert is triggered if the increase in storage capacity usage deviation has grown beyond the specified threshold within a day period. <br>一天中存储容量使用率增量超过特定阈值时触发此服务级告警。</td>
<td align="left">50%</td>
</tr>
<tr>
<td align="left">NameNode client RPC Queue Latency (Hourly) <br>NameNode客户端RPC队列延迟(每小时)</td>
<td align="left">This service-level alert is triggered if the deviation of RPC queue latency on client port has grown beyond the specified threshold within an hour period. 一小时中客户端接口的RPC队列延迟增长率超过特定阈值时触发此服务级告警。</td>
<td align="left">200%</td>
</tr>
<tr>
<td align="left">HDFS Capacity Utilization <br>HDFS容量使用</td>
<td align="left">This service-level alert is triggered if the HDFS capacity utilization exceeds the configured warning and critical thresholds. It checks the NameNode JMX Servlet for the CapacityUsed and CapacityRemaining properties. The threshold values are in percent. <br>HDFS容量使用超过设定警告和告警阈值时触发此服务级告警。会检查NameNode JMX中的容量使用和容量存留。阈值以百分比形式展示。</td>
<td align="left">80%</td>
</tr>
<tr>
<td align="left">NameNode Heap Usage (Weekly) <br>NameNode 堆使用(每周)</td>
<td align="left">This service-level alert is triggered if the NameNode heap usage deviation has grown beyond the specified threshold within a week period. <br>一周中NameNode 堆使用偏移量增长率超特定阈值时触发此服务级告警。</td>
<td align="left">50%</td>
</tr>
<tr>
<td align="left">NameNode Directory Status <br>NameNode文档状态</td>
<td align="left">This host-level alert is triggered if the NameNode NameDirStatuses metric (name=NameNodeInfo/NameDirStatuses) reports a failed directory. The threshold values are in the number of directories that are not healthy. <br>NameNode 名字文档中有失效文档时触发此主机级告警。阈值是不健康文档数量。</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">NameNode Client RPC Latency (Hourly) <br>NameNode客户端RPC延迟(每小时)</td>
<td align="left">This service-level alert is triggered if the deviation of RPC latency on client port has grown beyond the specified threshold within an hour period. <br>一小时中客户端接口RPC延迟偏移量增长率超过特定阈值时触发此服务级告警。</td>
<td align="left">200%</td>
</tr>
<tr>
<td align="left">NameNode Host CPU Utilization <br>NameNode主机CPU使用</td>
<td align="left">This host-level alert is triggered if CPU utilization of the NameNode exceeds certain warning and critical thresholds. It checks the NameNode JMX Servlet for the SystemCPULoad property. The threshold values are in percent. <br>NameNode的CPU使用超过警告和告警阈值时触发此主机级告警。会检查NameNode JMX中的系统CPU载入量。阈值以百分比形式展示。</td>
<td align="left">250%</td>
</tr>
<tr>
<td align="left">Zookeeper Failover Controller Process <br>zookeeper故障转移控制进程</td>
<td align="left">This host-level alert is triggered if the ZooKeeper Failover Controller process cannot be confirmed to be up and listening on the network. <br>zookeeper故障转移控制进程不能被确认已启动或被网络监听时触发此主机级告警。</td>
<td align="left">6</td>
</tr>
<tr>
<td align="left">NameNode High Availability Health NameNode高可用健康状态</td>
<td align="left">This service-level alert is triggered if either the Active NameNode or Standby NameNode are not running. 主节点或备用节点的NameNode都不运行时触发此服务级告警。</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">Percent DataNodes Available DataNode可用百分比</td>
<td align="left">This alert is triggered if the number of down DataNodes in the cluster is greater than the configured critical threshold. It aggregates the results of DataNode process checks. 集群中挂掉的DataNode数目超过所设定阈值时触发此告警。这会聚合DataNode进程检查结果。</td>
<td align="left">30%</td>
</tr>
<tr>
<td align="left">Percent DataNodes With Available Sapce DataNode中可用空间百分比</td>
<td align="left">This service-level alert is triggered if the storage on a certain percentage of DataNodes exceeds either the warning or critical threshold values. 一定比例的DataNode中存储量超过警告或告警阈值时触发此服务级告警。</td>
<td align="left">30%</td>
</tr>
<tr>
<td align="left">Percent JournalNodes Available <br>JournalNode可用百分比</td>
<td align="left">This alert is triggered if the number of down JournalNodes in the cluster is greater than the configured critical threshold. It aggregates the results of JournalNode process checks. <br>集群中所挂掉JournalNode数目多于所设定阈值时触发此告警。会聚合JournalNode进程检查结果。</td>
<td align="left">50%</td>
</tr>
<tr>
<td align="left">NameNode Service RPC Processing Latency (Hourly) <br>NameNode服务RPC延迟(每小时)</td>
<td align="left">This service-level alert is triggered if the deviation of RPC latency on datanode port has grown beyond the specified threshold within an hour period. <br>一小时中DataNode接口总的RPC延迟偏移量超过所设定阈值时触发此服务级告警。</td>
<td align="left">200%</td>
</tr>
<tr>
<td align="left">NameNode Service RPC Queue Latency(Hourly) <br>NameNode服务RPC队列延迟(每小时)</td>
<td align="left">This service-level alert is triggered if the deviation of RPC queue latency on datanode port has grown beyond the specified threshold within an hour period. <br>一小时中datanote接口中RPC队列延迟偏移增长率超过设定阈值时触发此服务级告警。</td>
<td align="left">200%</td>
</tr>
<tr>
<td align="left">NameNode Service RPC Queue Latency(Daily) <br>NameNode服务RPC队列延迟(每天)</td>
<td align="left">This service-level alert is triggered if the deviation of RPC latency on datanode port has grown beyond the specified threshold within a day period. <br>一天中datanote接口中RPC延迟偏移增长率超过设定阈值时触发此服务级告警。</td>
<td align="left">200%</td>
</tr>
<tr>
<td align="left">Secondary NameNode Process <br>NameNode副本进程</td>
<td align="left">This host-level alert is triggered if the Secondary NameNode process cannot be confirmed to be up and listening on the network.<br> NameNode副本进程不能被确认已启动或被网络监听时触发此主机级告警。</td>
<td align="left">Connection failed to {1} ({3})</td>
</tr>
<tr>
<td align="left">NFS Gateway Process <br>NFS网关进程</td>
<td align="left">This host-level alert is triggered if the NFS Gateway process cannot be confirmed to be up and listening on the network. <br>NFS网关进程不能被确认已启动或被网络监听时触发此主机级告警。</td>
<td align="left">5</td>
</tr>
<tr>
<td align="left">NameNode Service RPC Processing Latency(Daily) <br>NameNode服务RPC进程延迟(每天)</td>
<td align="left">This service-level alert is triggered if the deviation of RPC latency on datanode port has grown beyond the specified threshold within a day period. <br>一天中DataNode接口的RPC延迟偏移量增长率超过设定阈值时触发此主机级告警。</td>
<td align="left">200%</td>
</tr>
</tbody></table>
<h2 id="5-YARN-告警"><a href="#5-YARN-告警" class="headerlink" title="5. YARN 告警"></a>5. YARN 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险<br>(CRITICAL)<br> 默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">NodeManager Web UI</td>
<td align="left">This host-level alert is triggered if the NodeManager Web UI is unreachable. <br>不能访问 NodeManager Web UI时触发此主机级告警。</td>
<td align="left">Connection failed to {1} ({3})</td>
</tr>
<tr>
<td align="left">NodeManager Health <br>NodeManager健康状态</td>
<td align="left">This host-level alert checks the node health property available from the NodeManager component.<br> 此主机级告警检查NodeManager组件中的节点健康状态。</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">ResourceManager Web UI</td>
<td align="left">This host-level alert is triggered if the ResourceManager Web UI is unreachable.<br> 不能访问 ResourceManager Web UI时触发此主机级告警。</td>
<td align="left">Connection failed to {1} ({3})</td>
</tr>
<tr>
<td align="left">ResourceManager CPU Utilization<br> ResourceManager CPU 使用情况</td>
<td align="left">This host-level alert is triggered if CPU utilization of the ResourceManager exceeds certain warning and critical thresholds. It checks the ResourceManager JMX Servlet for the SystemCPULoad property. The threshold values are in percent. <br>ResourceManager CPU 使用增长率超过警告及告警阈值时触发此主机级告警。会检查ResourceManager JMX的系统CPU负载能力。阈值以百分比形式展示。</td>
<td align="left">250%</td>
</tr>
<tr>
<td align="left">ResourceManager RPC Latency <br>ResourceManager RPC 延迟</td>
<td align="left">This host-level alert is triggered if the ResourceManager operations RPC latency exceeds the configured critical threshold. Typically an increase in the RPC processing time increases the RPC queue length, causing the average queue wait time to increase for ResourceManager operations. The threshold values are in milliseconds. <br>ResourceManager RPC 延迟超过设定告警阈值时触发此主机级告警。典型情况下增加RPC进程时间会增加RPC队列长度，使ResourceManager操作的平均队列等待时间增加。此阈值为毫秒级。</td>
<td align="left">5000</td>
</tr>
<tr>
<td align="left">NodeManager Health Summary <br>NodeManager健康状态</td>
<td align="left">This service-level alert is triggered if there are unhealthy NodeManagers <br>有不健康的NodeManager时触发此服务级高级。</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">Percent NodeManagers Available <br>可用NodeManager百分比</td>
<td align="left">This alert is triggered if the number of down NodeManagers in the cluster is greater than the configured critical threshold. It aggregates the results of NodeManager process checks. <br>集群中挂掉的NodeManager数量超过所设定告警阈值时触发此告警。会聚合NodeManager进程检查结果。</td>
<td align="left">30%</td>
</tr>
<tr>
<td align="left">App Timeline Web UI</td>
<td align="left">This host-level alert is triggered if the App Timeline Server Web UI is unreachable. <br>不能访问App Timeline Server Web UI时触发此主机级告警。</td>
<td align="left">Connection failed to {1} ({3})</td>
</tr>
<tr>
<td align="left">Failed Apps Check <br>失败的App检查</td>
<td align="left">This service-level alert is triggered if failed yarn apps is beyond the specified threshold within a given time span. <br>在给定时间内失败的yarn app数超过阈值时触发此服务级告警。</td>
<td align="left">2</td>
</tr>
</tbody></table>
<h2 id="6-MapReduce2-告警"><a href="#6-MapReduce2-告警" class="headerlink" title="6. MapReduce2 告警"></a>6. MapReduce2 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险<br>(CRITICAL) <br>默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">History Server <br>Web UI 历史服务器Web UI</td>
<td align="left">This host-level alert is triggered if the History Server Web UI is unreachable. <br>不能访问历史服务器Web UI时触发此主机级告警。</td>
<td align="left">Connection failed to {1} ({3})</td>
</tr>
<tr>
<td align="left">History Server RPC <br>Latency 历史服务器RPC延迟</td>
<td align="left">This host-level alert is triggered if the History Server operations RPC latency exceeds the configured critical threshold. Typically an increase in the RPC processing time increases the RPC queue length, causing the average queue wait time to increase for operations. The threshold values are in milliseconds. <br>历史服务器RPC延迟超过设定阈值时触发此主机级告警。一般增减RPC进程时间会增加RPC队列长度，使操作的平均队列等待时间增加。阈值为毫秒级。</td>
<td align="left">5000</td>
</tr>
<tr>
<td align="left">History Server CPU Utilization<br> 历史服务器CPU使用情况</td>
<td align="left">This host-level alert is triggered if the percent of CPU utilization on the History Server exceeds the configured critical threshold. The threshold values are in percent. <br>历史服务器的CPU使用百分比超过阈值时触发此主机级告警。阈值以百分比形式展示。</td>
<td align="left">250%</td>
</tr>
<tr>
<td align="left">History Server<br> Process 利用服务器进程</td>
<td align="left">This host-level alert is triggered if the History Server process cannot be established to be up and listening on the network. <br>历史服务器进程不能被启动或从网络监听时会触发此主机级告警。</td>
<td align="left">5</td>
</tr>
</tbody></table>
<h2 id="7-Hive-告警"><a href="#7-Hive-告警" class="headerlink" title="7. Hive 告警"></a>7. Hive 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险<br>(CRITICAL)<br> 默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">WebHCat Server Status<br> WebHCat 服务器状态</td>
<td align="left">This host-level alert is triggered if the templeton server status is not healthy. <br>templeton 服务器状态不健康时触发此主机级告警。</td>
<td align="left">5</td>
</tr>
<tr>
<td align="left">HiveServer2 Interactive Process <br>HiveServer2 交互过程</td>
<td align="left">This host-level alert is triggered if the HiveServerInteractive cannot be determined to be up and responding to client requests. <br>Hive服务器交互不能确认已启动和响应客户端时会触发此主机级告警。</td>
<td align="left">60</td>
</tr>
<tr>
<td align="left">Hive MetaStore Process <br>Hive元数据过程</td>
<td align="left">This host-level alert is triggered if the Hive Metastore process cannot be determined to be up and listening on the network. <br>Hive元数据过程不能确定已启动和从网络进行监听时触发此主机级告警。</td>
<td align="left">60</td>
</tr>
<tr>
<td align="left">LLAP Application <br>LLAP应用</td>
<td align="left">This alert is triggered if the LLAP Application cannot be determined to be up and responding to requests. <br>LLAP应用不能确定已启动和响应客户端时触发此主机级告警。</td>
<td align="left">120</td>
</tr>
<tr>
<td align="left">HiveServer2 Process<br> HiveServer2 进程</td>
<td align="left">This host-level alert is triggered if the HiveServer cannot be determined to be up and responding to client requests.<br> Hive服务器不能确定已启动和响应客户端时触发此主机级告警。</td>
<td align="left">60</td>
</tr>
</tbody></table>
<h2 id="8-HBase-告警"><a href="#8-HBase-告警" class="headerlink" title="8. HBase 告警"></a>8. HBase 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险<br>(CRITICAL)<br> 默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">HBase RegionServer Process <br>HBase RegionServer 进程</td>
<td align="left">This host-level alert is triggered if the RegionServer processes cannot be confirmed to be up and listening on the network for the configured critical threshold, given in seconds. <br>HBase RegionServer 进程不能确认已启动和在给定阈值(秒级)下从网络监听时触发此主机级告警。</td>
<td align="left">5</td>
</tr>
<tr>
<td align="left">HBase Master Process<br> HBase 主节点进程</td>
<td align="left">This alert is triggered if the HBase master processes cannot be confirmed to be up and listening on the network for the configured critical threshold, given in seconds. <br>HBase 主节点进程不能确认已启动和在给定阈值(秒级)下从网络监听时触发此主机级告警。</td>
<td align="left">5</td>
</tr>
<tr>
<td align="left">Percent RegionServers Available<br> RegionServer可用百分比</td>
<td align="left">This service-level alert is triggered if the configured percentage of RegionServer processes cannot be determined to be up and listening on the network for the configured warning and critical thresholds. It aggregates the results of RegionServer process down checks. <br>所配置一定百分比的RegionServer进程不能确认已启动或从网络监听时触发此服务级告警。这会聚合RegionSever进程失败检查结果。</td>
<td align="left">30%</td>
</tr>
<tr>
<td align="left">HBase Mater CPU Utilization <br>HBase主节点CPU使用情况</td>
<td align="left">This host-level alert is triggered if CPU utilization of the HBase Master exceeds certain warning and critical thresholds. It checks the HBase Master JMX Servlet for the SystemCPULoad property. <br>The threshold values are in percent. HBase主节点上CPU使用超过所设置的警告及告警阈值会触发此主机级告警。这会检查HBase 主节点JMX中的系统CPU负荷情况。阈值以百分比形式展示。</td>
<td align="left">250%</td>
</tr>
</tbody></table>
<h2 id="9-Oozie-告警"><a href="#9-Oozie-告警" class="headerlink" title="9. Oozie 告警"></a>9. Oozie 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险<br>(CRITICAL) <br>默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Oozie Server Web UI</td>
<td align="left">This host-level alert is triggered if the Oozie server Web UI is unreachable. <br>不能访问此Oozie服务器Web UI时触发此告警。</td>
<td align="left">Connection failed to {1} ({3})</td>
</tr>
<tr>
<td align="left">Oozie Server Status <br>Oozie Server状态</td>
<td align="left">This host-level alert is triggered if the Oozie server cannot be determined to be up and responding to client requests. <br>Oozie Server不能确定已启动和不响应客户端请求时触发此主机级告警。</td>
<td align="left">1</td>
</tr>
</tbody></table>
<h2 id="10-ZooKeeper-告警"><a href="#10-ZooKeeper-告警" class="headerlink" title="10. ZooKeeper 告警"></a>10. ZooKeeper 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险<br>(CRITICAL)<br> 默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ZooKeeper Server Process <br>ZooKeeper服务器进程</td>
<td align="left">This host-level alert is triggered if the ZooKeeper server process cannot be determined to be up and listening on the network. <br>ZooKeeper服务器进程不能确认已启动和从网络监听时触发此主机级告警。</td>
<td align="left">5</td>
</tr>
<tr>
<td align="left">Percent ZooKeeper Servers Available <br>Zookeeper服务器可用百分比</td>
<td align="left">This alert is triggered if the number of down ZooKeeper servers in the cluster is greater than the configured critical threshold. It aggregates the results of ZooKeeper process checks. <br>集群中所挂掉Zookeeper服务器数量大于所配置阈值时触发此告警。会对Zookeeper进程检查结果进行聚合。</td>
<td align="left">70%</td>
</tr>
</tbody></table>
<h2 id="11-Storm-告警"><a href="#11-Storm-告警" class="headerlink" title="11. Storm 告警"></a>11. Storm 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险(CRITICAL) 默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Supervisor Process</td>
<td align="left"></td>
<td align="left">5</td>
</tr>
<tr>
<td align="left">Percent Supervisors Available</td>
<td align="left"></td>
<td align="left">30%</td>
</tr>
<tr>
<td align="left">Storm Web UI</td>
<td align="left"></td>
<td align="left">Connection failed to {1} ({3})</td>
</tr>
<tr>
<td align="left">Nimbus Process</td>
<td align="left"></td>
<td align="left">5</td>
</tr>
<tr>
<td align="left">DRPC Server Process</td>
<td align="left"></td>
<td align="left">5</td>
</tr>
</tbody></table>
<h2 id="12-Kafka-告警"><a href="#12-Kafka-告警" class="headerlink" title="12. Kafka 告警"></a>12. Kafka 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险<br>(CRITICAL)<br> 默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Kafka Broker Process <br>Kafka Broker进程</td>
<td align="left">This host-level alert is triggered if the Kafka Broker cannot be determined to be up.<br> Kafka Broker进程不能确定是否已启动时触发此主机级告警。</td>
<td align="left">5</td>
</tr>
</tbody></table>
<h2 id="13-spark2-告警"><a href="#13-spark2-告警" class="headerlink" title="13. spark2 告警"></a>13. spark2 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险(CRITICAL) 默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Spark2 Livy Server <br>Spark2 Livy服务器</td>
<td align="left">This host-level alert is triggered if the Livy2 Server cannot be determined to be up. <br>Livy2 服务器不能确认已启动时触发此主机级告警。</td>
<td align="left">60</td>
</tr>
<tr>
<td align="left">Spark2 History Server <br>Spark2 历史服务器</td>
<td align="left">This host-level alert is triggered if the Spark2 History Server cannot be determined to be up. <br>Spark2 历史服务不能确认已启动时触发此主机级告警。</td>
<td align="left">5</td>
</tr>
<tr>
<td align="left">Spark2 Thrift Server <br>Spark2 Thrift 服务器</td>
<td align="left">This host-level alert is triggered if the Spark2 Thrift Server cannot be determined to be up. <br>Spark2 Thrift 服务不能确认已启动时触发此主机级告警。</td>
<td align="left">60</td>
</tr>
</tbody></table>
<h2 id="14-ElasticSearch-告警"><a href="#14-ElasticSearch-告警" class="headerlink" title="14. ElasticSearch 告警"></a>14. ElasticSearch 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险<br>(CRITICAL)<br> 默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ElasticSearch Process Check<br> ElasticSearch 进程检查</td>
<td align="left">This host-level alert is triggered if the ElasticSearch Master cannot be determined to be up. <br>ElasticSearch 主节点不能确定已启动时触发此主机级告警。</td>
<td align="left">5</td>
</tr>
</tbody></table>
<h2 id="15-Hue-告警"><a href="#15-Hue-告警" class="headerlink" title="15. Hue 告警"></a>15. Hue 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险<br>(CRITICAL)<br> 默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Hue Web UI</td>
<td align="left">This host-level alert is triggered if the Hue Web UI is unreachable. <br>不能访问Hue Web UI时触发此主机级告警。</td>
<td align="left">5</td>
</tr>
</tbody></table>
<h2 id="16-Ambari-告警"><a href="#16-Ambari-告警" class="headerlink" title="16. Ambari 告警"></a>16. Ambari 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险<br>(CRITICAL)<br> 默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Host Disk Usage <br>主机硬盘使用情况</td>
<td align="left">This host-level alert is triggered if the amount of disk space used goes above specific thresholds. The default threshold values are 50% for WARNING and 80% for CRITICAL. <br>主机硬盘使用率超过阈值时触发此主机级告警。阈值默认为警告：50%，告警：80%。</td>
<td align="left">80%</td>
</tr>
<tr>
<td align="left">Ambari Agent Distro/conf Select Versions <br>Ambari 客户端Distro/conf版本选择</td>
<td align="left">This host-level alert is triggered if the distro selector such as hdp-select cannot calculate versions available on this host. This may indicate that /usr/$stack/ directory has links/dirs that do not belong inside of it. <br>主机上没有所选择distro版本(如hdp选择)时触发此主机级版告警。这可能时因为在 /usr/$stack/目录下含不属于其链接的目录。</td>
<td align="left">5</td>
</tr>
<tr>
<td align="left">Host Disk Usage For Dir ‘/‘ <br>主机硬盘使用目录‘/’</td>
<td align="left">This host-level alert is triggered if the amount of disk space used goes above specific thresholds. The default threshold values are 80% for WARNING and 90% for CRITICAL. <br>硬盘使用量超过阈值时触发此主机级告警。阈值默认为警告：80%，告警：90%。</td>
<td align="left">5.0E9 bytes</td>
</tr>
<tr>
<td align="left">Host Disk Usage For Dir ‘/mnt’ <br>主机硬盘使用目录‘/mnt’</td>
<td align="left">This host-level alert is triggered if the amount of disk space used goes above specific thresholds. The default threshold values are 80% for WARNING and 90% for CRITICAL.<br> 硬盘使用量超过阈值时触发此主机级告警。阈值默认为警告：80%，告警：90%。</td>
<td align="left">5.0E9 bytes</td>
</tr>
<tr>
<td align="left">Ambari Agent Heartbeat <br>Ambari客户端心跳</td>
<td align="left">This alert is triggered if the server has lost contact with an agent. <br>服务器未收到客户端心跳时出发此告警。</td>
<td align="left">2</td>
</tr>
<tr>
<td align="left">Ambari Server Alerts <br>Ambari 服务器告警</td>
<td align="left">This alert is triggered if the server detects that there are alerts which have not run in a timely manner.<br> 如果服务器检测到没有及时运行的警报时触发此警报。</td>
<td align="left">2</td>
</tr>
<tr>
<td align="left">Ambari Server Performance <br>Ambari服务器性能</td>
<td align="left">This alert is triggered if the Ambari Server detects that there is a potential performance problem with Ambari. This type of issue can arise for many reasons, but is typically attributed to slow database queries and host resource exhaustion.<br> Ambari服务器检测Amabri有潜在运行问题时触发此告警。有很多因素都有可能导致这个问题，但最常见的是由于数据库查询缓慢以及主机资源耗尽。</td>
<td align="left">5000</td>
</tr>
<tr>
<td align="left">component Version <br>组件版本</td>
<td align="left">This alert is triggered if the server detects that there is a problem with the expected and reported version of a component. The alert is suppressed automatically during an upgrade. <br>服务器检测到组件有版本问题时触发此告警。在组件升级时常会触发此告警。</td>
<td align="left">5</td>
</tr>
</tbody></table>
<h2 id="17-Ambari-Metrics-告警"><a href="#17-Ambari-Metrics-告警" class="headerlink" title="17. Ambari Metrics 告警"></a>17. Ambari Metrics 告警</h2><table>
<thead>
<tr>
<th align="left">告警定义名称<br>(Alert Definition Name)</th>
<th align="left">描述(Description)</th>
<th align="left">危险<br>(CRITICAL)<br> 默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Metrics Monitor Status <br>Metrics 监控状态</td>
<td align="left">This alert indicates the status of the Metrics Monitor process as determined by the monitor status script. <br>此告警指示监控器状态脚本所确定的Metrics监控进程状态。</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">Metrics Collector Process <br>Metrics收集器进程</td>
<td align="left">This alert is triggered if the Metrics Collector cannot be confirmed to be up and listening on the configured port for number of seconds equal to threshold. Metrics<br>收集器不能确认已启动或在数秒内监听到的次数没有达到所配置阈值次数时触发此告警。</td>
<td align="left">5</td>
</tr>
<tr>
<td align="left">Metrics collector - HBase CPU Utilization <br>Metrics收集器的HBase CPU使用</td>
<td align="left">This host-level alert is triggered if CPU utilization of the Metrics Collector’s HBase Master exceeds certain warning and critical thresholds. It checks the HBase Master JMX Servlet for the SystemCPULoad property. The threshold values are in percent. <br>Metrics收集器的HBase主节点的CPU使用超过警告和告警阈值。回检查HBase主节点JMX的系统CPU加载情况。阈值以百分比形式展示。</td>
<td align="left">250%</td>
</tr>
<tr>
<td align="left">Metrics Collector - Auto-Restart Status <br>Metrics 收集器自动重启状态</td>
<td align="left">This alert is triggered if the Metrics Collector has been restarted automatically too frequently in last one hour. By default, a Warning alert is triggered if restarted twice in one hour and a Critical alert is triggered if restarted 4 or more times in one hour. <br>在最后一小时中Metrics收集器自动重启太频繁会触发此告警。一小时中两次重启系统警告，4次重启系统告警。</td>
<td align="left">Metrics Collector has been auto-started {1} times{0}.</td>
</tr>
<tr>
<td align="left">Percent Metrics Monitors Available <br>Metrics监控器可用百分比</td>
<td align="left">This alert is triggered if a percentage of Metrics Monitor processes are not up and listening on the network for the configured warning and critical thresholds. <br>一定比例(所配置的警告和告警阈值)的Metics 监控器未启动或从不能从网络监听到。</td>
<td align="left">30%</td>
</tr>
<tr>
<td align="left">Metrics Collector - HBase Master <br>Process Metrics收集器的HBase 主节点进程</td>
<td align="left">This alert is triggered if the Metrics Collector’s HBase master processes cannot be confirmed to be up and listening on the network for the configured critical threshold, given in seconds. <br>在给定时间内(秒)Metics收集器的HBase主节点进程不能确认已启动或从网络监听到触发此报警。</td>
<td align="left">5</td>
</tr>
<tr>
<td align="left">Grafana Web UI</td>
<td align="left">This host-level alert is triggered if the Grafana Web UI is unreachable. <br>不能访问Grafana Web UI时触发此告警。</td>
<td align="left">5</td>
</tr>
</tbody></table>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">hnbian</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://www.hnbian.cn/posts/c86ae59.html">https://www.hnbian.cn/posts/c86ae59.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">hnbian</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/ambari/">
                                    <span class="chip bg-color">ambari</span>
                                </a>
                            
                                <a href="/tags/exception/">
                                    <span class="chip bg-color">exception</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'h1rND3bHC0OqFwzm1UfPQpaY-gzGzoHsz',
        appKey: 'd7uboDt2WLV2HJCEMHkkLuU4',
        serverURLs: '',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'identicon',
        pageSize: '12',
        lang: 'zh-cn',
        placeholder: 'just go go'
    });
</script>

<!--酷Q推送-->


    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/e33b82cd.html">
                    <div class="card-image">
                        
                        <img src="http://images.hnbian.cn//Fkd7u2yNU8geCwrErPBpPiMiXnCQ" class="responsive-img" alt="安装 Ambari 时遇到的异常记录">
                        
                        <span class="card-title">安装 Ambari 时遇到的异常记录</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2023-03-08
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/ambari/" class="post-category">
                                    ambari
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/ambari/">
                        <span class="chip bg-color">ambari</span>
                    </a>
                    
                    <a href="/tags/exception/">
                        <span class="chip bg-color">exception</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/d8fad075.html">
                    <div class="card-image">
                        
                        <img src="https://images.hnbian.cn/FmYAX6cP7IMdDACZG15u6PXdGNek" class="responsive-img" alt="Spark 数据倾斜分析与解决思路">
                        
                        <span class="card-title">Spark 数据倾斜分析与解决思路</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-08-08
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/spark/" class="post-category">
                                    spark
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/exception/">
                        <span class="chip bg-color">exception</span>
                    </a>
                    
                    <a href="/tags/spark/">
                        <span class="chip bg-color">spark</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: hnbian<br />'
            + '文章作者: hnbian<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4, h5'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2018-2025</span>
            
            <a href="/about" target="_blank">hnbian</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
                <span id="translate">|&nbsp;繁/简：</span><a id="translateLink" href="javascript:translatePage();">繁</a>
            
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2018";
                        var startMonth = "2";
                        var startDate = "8";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // 区分是否有年份.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = '本站已运行 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                daysTip = '本站已運行 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            
                <span id="icp"><img src="/medias/icp.png"
                                    style="vertical-align: text-bottom;"/>
                <a href="https://beian.miit.gov.cn" target="_blank">粤ICP备18156920号-2</a>
            </span>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/hnbian" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:hnbian@126.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
        <script type="text/javascript" src="/js/tw_cn.js"></script>
        <script type="text/javascript">
          var defaultEncoding = 2; //网站编写字体是否繁体，1-繁体，2-简体
          var translateDelay = 0; //延迟时间,若不在前, 要设定延迟翻译时间, 如100表示100ms,默认为0
          var cookieDomain = "https://www.hnbian.cn"; //Cookie地址, 一定要设定, 通常为你的网址
          var msgToTraditionalChinese = "繁"; //此处可以更改为你想要显示的文字
          var msgToSimplifiedChinese = "简"; //同上，但两处均不建议更改
          var translateButtonId = "translateLink"; //默认互换id
          translateInitilization();
        </script>
    
    
    

    <!-- 雪花特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/snow.js"><\/script>');
            }
        </script>
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
