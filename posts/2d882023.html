<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="SparkSQL2.x  常用函数, hnbian">
    <meta name="description" content="% expr1  %  expr2  - 返回 expr1 除以 expr2 的余数。.
示例
1234&amp;gt; SELECT 2 % 1.8;0.2&amp;gt; SELECT MOD(2, 1.8);0.2



&amp;amp; expr1  &amp;">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-155985521-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'UA-155985521-1');
</script>


    <title>SparkSQL2.x  常用函数 | hnbian</title>
    <link rel="icon" type="image/png" href="https://images.hnbian.cn/FvNSAGx7xljxALFh8Fa2DPNFP-JB">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="hnbian" type="application/atom+xml">

<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="stylesheet" href="/css/prism-okaidia.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="https://images.hnbian.cn/FvNSAGx7xljxALFh8Fa2DPNFP-JB" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">hnbian</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="https://images.hnbian.cn/FvNSAGx7xljxALFh8Fa2DPNFP-JB" class="logo-img circle responsive-img">
        
        <div class="logo-name">hnbian</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/hnbian" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/hnbian" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('http://images.hnbian.cn//FnaBnzv3xBG7Yuq4iIJ_37jqBtq6')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">SparkSQL2.x  常用函数</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/spark/">
                                <span class="chip bg-color">spark</span>
                            </a>
                        
                            <a href="/tags/spark-sql/">
                                <span class="chip bg-color">spark sql</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/spark/" class="post-category">
                                spark
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2018-09-15
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id=""><a href="#" class="headerlink" title="%"></a>%</h2><p> expr1  %  expr2  - 返回 expr1 除以 expr2 的余数。.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">2</span> <span class="operator">%</span> <span class="number">1.8</span>;</span><br><span class="line"><span class="number">0.2</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">MOD</span>(<span class="number">2</span>, <span class="number">1.8</span>);</span><br><span class="line"><span class="number">0.2</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="-1"><a href="#-1" class="headerlink" title="&amp;"></a>&amp;</h2><p> expr1  &amp;  expr2  - Returns the result of bitwise AND of  expr1 and  expr2 .</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">3</span> <span class="operator">&amp;</span> <span class="number">5</span>;</span><br><span class="line"> <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="-2"><a href="#-2" class="headerlink" title="*"></a>*</h2><p> expr1  *  expr2  - Returns expr1 * expr2 .</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">2</span> <span class="operator">*</span> <span class="number">3</span>;</span><br><span class="line"> <span class="number">6</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="-3"><a href="#-3" class="headerlink" title="+"></a>+</h2><p> expr1  +  expr2  - Returns expr1 + expr2 .</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">1</span> <span class="operator">+</span> <span class="number">2</span>;</span><br><span class="line"> <span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="-4"><a href="#-4" class="headerlink" title="-"></a>-</h2><p> expr1  -  expr2  - Returns expr1 - expr2 .</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">2</span> <span class="operator">-</span> <span class="number">1</span>;</span><br><span class="line"> <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="-5"><a href="#-5" class="headerlink" title="/"></a>/</h2><p> expr1  /  expr2  - Returns expr1 / expr2 . It always performs floating point division.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">3</span> <span class="operator">/</span> <span class="number">2</span>;</span><br><span class="line"> <span class="number">1.5</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">2</span>L <span class="operator">/</span> <span class="number">2</span>L;</span><br><span class="line"> <span class="number">1.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="-6"><a href="#-6" class="headerlink" title="<"></a>&lt;</h2><p> expr1  &lt;  expr2  - Returns true if expr1 is less than expr2 .</p>
<h2 id="-7"><a href="#-7" class="headerlink" title="<="></a>&lt;=</h2><p> expr1  &lt;=  expr2  - Returns true if expr1 is less than or equal to expr2 .</p>
<h2 id="-8"><a href="#-8" class="headerlink" title="<=>"></a>&lt;=&gt;</h2><p> expr1  &lt;=&gt;  expr2  - Returns same result as the EQUAL(=) operator for non-null operands, but returns true if both are null, false if one of the them is null.</p>
<h2 id="-9"><a href="#-9" class="headerlink" title="="></a>=</h2><p> expr1  =  expr2  - Returns true if expr1 equals expr2 , or false otherwise.</p>
<h2 id="-10"><a href="#-10" class="headerlink" title="=="></a>==</h2><p> expr1  ==  expr2  - Returns true if expr1 equals expr2 , or false otherwise.</p>
<h2 id="-11"><a href="#-11" class="headerlink" title=">"></a>&gt;</h2><p> expr1  &gt;  expr2  - Returns true if expr1 is greater than expr2 .</p>
<h2 id="-12"><a href="#-12" class="headerlink" title=">="></a>&gt;=</h2><p> expr1  &gt;=  expr2  - Returns true if expr1 is greater than or equal to expr2 .</p>
<h2 id="-13"><a href="#-13" class="headerlink" title="^"></a>^</h2><p> expr1  ^  expr2  - Returns the result of bitwise exclusive OR of expr1 and expr2 .</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">3</span> <span class="operator">^</span> <span class="number">5</span>;</span><br><span class="line"> <span class="number">2</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="abs"><a href="#abs" class="headerlink" title="abs"></a>abs</h2><p>abs(expr) - Returns the absolute value of the numeric value.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">abs</span>(<span class="number">-1</span>);</span><br><span class="line"> <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="acos"><a href="#acos" class="headerlink" title="acos"></a>acos</h2><p>acos(expr) - Returns the inverse cosine (a.k.a. arccosine) ofexprif -1&lt;=expr&lt;=1 or NaN otherwise.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">acos</span>(<span class="number">1</span>);</span><br><span class="line"> <span class="number">0.0</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">acos</span>(<span class="number">2</span>);</span><br><span class="line"> NaN</span><br></pre></td></tr></tbody></table></figure>



<h2 id="add-months"><a href="#add-months" class="headerlink" title="add_months"></a>add_months</h2><p>add_months(start_date, num_months) - Returns the date that isnum_monthsafterstart_date.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> add_months(<span class="string">'2016-08-31'</span>, <span class="number">1</span>);</span><br><span class="line"> <span class="number">2016</span><span class="number">-09</span><span class="number">-30</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="and"><a href="#and" class="headerlink" title="and"></a>and</h2><p> expr1  and  expr2  - Logical AND.</p>
<h2 id="approx-count-distinct"><a href="#approx-count-distinct" class="headerlink" title="approx_count_distinct"></a>approx_count_distinct</h2><p>approx_count_distinct(expr[, relativeSD]) - Returns the estimated cardinality by HyperLogLog++.relativeSDdefines the maximum estimation error allowed.</p>
<h2 id="approx-percentile"><a href="#approx-percentile" class="headerlink" title="approx_percentile"></a>approx_percentile</h2><p>approx_percentile(col, percentage [, accuracy]) - Returns the approximate percentile value of numeric columncolat the given percentage. The value of percentage must be between 0.0 and 1.0. Theaccuracyparameter (default: 10000) is a positive numeric literal which controls approximation accuracy at the cost of memory. Higher value ofaccuracyyields better accuracy,1.0/accuracyis the relative error of the approximation. Whenpercentageis an array, each value of the percentage array must be between 0.0 and 1.0. In this case, returns the approximate percentile array of columncolat the given percentage array.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> approx_percentile(<span class="number">10.0</span>, <span class="keyword">array</span>(<span class="number">0.5</span>, <span class="number">0.4</span>, <span class="number">0.1</span>), <span class="number">100</span>);</span><br><span class="line"> [<span class="number">10.0</span>,<span class="number">10.0</span>,<span class="number">10.0</span>]</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> approx_percentile(<span class="number">10.0</span>, <span class="number">0.5</span>, <span class="number">100</span>);</span><br><span class="line"> <span class="number">10.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="array"><a href="#array" class="headerlink" title="array"></a>array</h2><p>array(expr, …) - Returns an array with the given elements.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></tbody></table></figure>



<h2 id="array-contains"><a href="#array-contains" class="headerlink" title="array_contains"></a>array_contains</h2><p>array_contains(array, value) - Returns true if the array contains the value.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> array_contains(<span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), <span class="number">2</span>);</span><br><span class="line"> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="ascii"><a href="#ascii" class="headerlink" title="ascii"></a>ascii</h2><p>ascii(str) - Returns the numeric value of the first character ofstr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> ascii(<span class="string">'222'</span>);</span><br><span class="line"> <span class="number">50</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> ascii(<span class="number">2</span>);</span><br><span class="line"> <span class="number">50</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="asin"><a href="#asin" class="headerlink" title="asin"></a>asin</h2><p>asin(expr) - Returns the inverse sine (a.k.a. arcsine) the arc sin ofexprif -1&lt;=expr&lt;=1 or NaN otherwise.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">asin</span>(<span class="number">0</span>);</span><br><span class="line"> <span class="number">0.0</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">asin</span>(<span class="number">2</span>);</span><br><span class="line"> NaN</span><br></pre></td></tr></tbody></table></figure>



<h2 id="assert-true"><a href="#assert-true" class="headerlink" title="assert_true"></a>assert_true</h2><p>assert_true(expr) - Throws an exception ifexpris not true.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> assert_true(<span class="number">0</span> <span class="operator">&lt;</span> <span class="number">1</span>);</span><br><span class="line"> <span class="keyword">NULL</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="atan"><a href="#atan" class="headerlink" title="atan"></a>atan</h2><p>atan(expr) - Returns the inverse tangent (a.k.a. arctangent).</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">atan</span>(<span class="number">0</span>);</span><br><span class="line"> <span class="number">0.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="atan2"><a href="#atan2" class="headerlink" title="atan2"></a>atan2</h2><p>atan2( expr1 ,  expr2 ) - Returns the angle in radians between the positive x-axis of a plane and the point given by the coordinates ( expr1 , expr2 ).</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> atan2(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"> <span class="number">0.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="avg"><a href="#avg" class="headerlink" title="avg"></a>avg</h2><p>avg(expr) - Returns the mean calculated from values of a group.</p>
<h2 id="base64"><a href="#base64" class="headerlink" title="base64"></a>base64</h2><p>base64(bin) - Converts the argument from a binarybinto a base 64 string.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> base64(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> U3BhcmsgU1FM</span><br></pre></td></tr></tbody></table></figure>



<h2 id="bigint"><a href="#bigint" class="headerlink" title="bigint"></a>bigint</h2><p>bigint(expr) - Casts the valueexprto the target data typebigint.</p>
<h2 id="bin"><a href="#bin" class="headerlink" title="bin"></a>bin</h2><p>bin(expr) - Returns the string representation of the long valueexprrepresented in binary.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> bin(<span class="number">13</span>);</span><br><span class="line"> <span class="number">1101</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> bin(<span class="number">-13</span>);</span><br><span class="line"> <span class="number">1111111111111111111111111111111111111111111111111111111111110011</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> bin(<span class="number">13.3</span>);</span><br><span class="line"> <span class="number">1101</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="binary"><a href="#binary" class="headerlink" title="binary"></a>binary</h2><p>binary(expr) - Casts the valueexprto the target data typebinary.</p>
<h2 id="bit-length"><a href="#bit-length" class="headerlink" title="bit_length"></a>bit_length</h2><p>bit_length(expr) - Returns the bit length ofexpror number of bits in binary data.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> bit_length(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> <span class="number">72</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="boolean"><a href="#boolean" class="headerlink" title="boolean"></a>boolean</h2><p>boolean(expr) - Casts the valueexprto the target data typeboolean.</p>
<h2 id="bround"><a href="#bround" class="headerlink" title="bround"></a>bround</h2><p>bround(expr, d) - Returnsexprrounded toddecimal places using HALF_EVEN rounding mode.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> bround(<span class="number">2.5</span>, <span class="number">0</span>);</span><br><span class="line"> <span class="number">2.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="cast"><a href="#cast" class="headerlink" title="cast"></a>cast</h2><p>cast(expr AS type) - Casts the valueexprto the target data typetype.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">cast</span>(<span class="string">'10'</span> <span class="keyword">as</span> <span class="type">int</span>);</span><br><span class="line"> <span class="number">10</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="cbrt"><a href="#cbrt" class="headerlink" title="cbrt"></a>cbrt</h2><p>cbrt(expr) - Returns the cube root ofexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> cbrt(<span class="number">27.0</span>);</span><br><span class="line"> <span class="number">3.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="ceil"><a href="#ceil" class="headerlink" title="ceil"></a>ceil</h2><p>ceil(expr) - Returns the smallest integer not smaller thanexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">ceil</span>(<span class="number">-0.1</span>);</span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">ceil</span>(<span class="number">5</span>);</span><br><span class="line"> <span class="number">5</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="ceiling"><a href="#ceiling" class="headerlink" title="ceiling"></a>ceiling</h2><p>ceiling(expr) - Returns the smallest integer not smaller thanexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">ceiling</span>(<span class="number">-0.1</span>);</span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">ceiling</span>(<span class="number">5</span>);</span><br><span class="line"> <span class="number">5</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="char"><a href="#char" class="headerlink" title="char"></a>char</h2><p>char(expr) - Returns the ASCII character having the binary equivalent toexpr. If n is larger than 256 the result is equivalent to chr(n % 256)</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="type">char</span>(<span class="number">65</span>);</span><br><span class="line"> A</span><br></pre></td></tr></tbody></table></figure>



<h2 id="char-length"><a href="#char-length" class="headerlink" title="char_length"></a>char_length</h2><p>char_length(expr) - Returns the character length ofexpror number of bytes in binary data.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">char_length</span>(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> <span class="number">9</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">CHAR_LENGTH</span>(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> <span class="number">9</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">CHARACTER_LENGTH</span>(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> <span class="number">9</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="character-length"><a href="#character-length" class="headerlink" title="character_length"></a>character_length</h2><p>character_length(expr) - Returns the character length ofexpror number of bytes in binary data.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">character_length</span>(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> <span class="number">9</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">CHAR_LENGTH</span>(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> <span class="number">9</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">CHARACTER_LENGTH</span>(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> <span class="number">9</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="chr"><a href="#chr" class="headerlink" title="chr"></a>chr</h2><p>chr(expr) - Returns the ASCII character having the binary equivalent toexpr. If n is larger than 256 the result is equivalent to chr(n % 256)</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> chr(<span class="number">65</span>);</span><br><span class="line"> A</span><br></pre></td></tr></tbody></table></figure>



<h2 id="coalesce"><a href="#coalesce" class="headerlink" title="coalesce"></a>coalesce</h2><p>coalesce( expr1 ,  expr2 , …) - Returns the first non-null argument if exists. Otherwise, null.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">coalesce</span>(<span class="keyword">NULL</span>, <span class="number">1</span>, <span class="keyword">NULL</span>);</span><br><span class="line"> <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="collect-list"><a href="#collect-list" class="headerlink" title="collect_list"></a>collect_list</h2><p>collect_list(expr) - Collects and returns a list of non-unique elements.</p>
<h2 id="collect-set"><a href="#collect-set" class="headerlink" title="collect_set"></a>collect_set</h2><p>collect_set(expr) - Collects and returns a set of unique elements.</p>
<h2 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h2><p>concat(str1, str2, …, strN) - Returns the concatenation of str1, str2, …, strN.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> concat(<span class="string">'Spark'</span>, <span class="string">'SQL'</span>);</span><br><span class="line"> SparkSQL</span><br></pre></td></tr></tbody></table></figure>



<h2 id="concat-ws"><a href="#concat-ws" class="headerlink" title="concat_ws"></a>concat_ws</h2><p>concat_ws(sep, [str | array(str)]+) - Returns the concatenation of the strings separated bysep.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> concat_ws(<span class="string">' '</span>, <span class="string">'Spark'</span>, <span class="string">'SQL'</span>);</span><br><span class="line">  Spark <span class="keyword">SQL</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="conv"><a href="#conv" class="headerlink" title="conv"></a>conv</h2><p>conv(num, from_base, to_base) - Convertnumfromfrom_basetoto_base.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> conv(<span class="string">'100'</span>, <span class="number">2</span>, <span class="number">10</span>);</span><br><span class="line"> <span class="number">4</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> conv(<span class="number">-10</span>, <span class="number">16</span>, <span class="number">-10</span>);</span><br><span class="line"> <span class="number">-16</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="corr"><a href="#corr" class="headerlink" title="corr"></a>corr</h2><p>corr( expr1 ,  expr2 ) - Returns Pearson coefficient of correlation between a set of number pairs.</p>
<h2 id="cos"><a href="#cos" class="headerlink" title="cos"></a>cos</h2><p>cos(expr) - Returns the cosine ofexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">cos</span>(<span class="number">0</span>);</span><br><span class="line"> <span class="number">1.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="cosh"><a href="#cosh" class="headerlink" title="cosh"></a>cosh</h2><p>cosh(expr) - Returns the hyperbolic cosine ofexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">cosh</span>(<span class="number">0</span>);</span><br><span class="line"> <span class="number">1.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="cot"><a href="#cot" class="headerlink" title="cot"></a>cot</h2><p>cot(expr) - Returns the cotangent ofexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> cot(<span class="number">1</span>);</span><br><span class="line"> <span class="number">0.6420926159343306</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="count"><a href="#count" class="headerlink" title="count"></a>count</h2><p>count(*) - Returns the total number of retrieved rows, including rows containing null.</p>
<p>count(expr) - Returns the number of rows for which the supplied expression is non-null.</p>
<p>count(DISTINCT expr[, expr…]) - Returns the number of rows for which the supplied expression(s) are unique and non-null.</p>
<h2 id="count-min-sketch"><a href="#count-min-sketch" class="headerlink" title="count_min_sketch"></a>count_min_sketch</h2><p>count_min_sketch(col, eps, confidence, seed) - Returns a count-min sketch of a column with the given esp, confidence and seed. The result is an array of bytes, which can be deserialized to aCountMinSketchbefore usage. Count-min sketch is a probabilistic data structure used for cardinality estimation using sub-linear space.</p>
<h2 id="covar-pop"><a href="#covar-pop" class="headerlink" title="covar_pop"></a>covar_pop</h2><p>covar_pop( expr1 ,  expr2 ) - Returns the population covariance of a set of number pairs.</p>
<h2 id="covar-samp"><a href="#covar-samp" class="headerlink" title="covar_samp"></a>covar_samp</h2><p>covar_samp( expr1 ,  expr2 ) - Returns the sample covariance of a set of number pairs.</p>
<h2 id="crc32"><a href="#crc32" class="headerlink" title="crc32"></a>crc32</h2><p>crc32(expr) - Returns a cyclic redundancy check value of theexpras a bigint.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> crc32(<span class="string">'Spark'</span>);</span><br><span class="line"> <span class="number">1557323817</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="cube"><a href="#cube" class="headerlink" title="cube"></a>cube</h2><h2 id="cume-dist"><a href="#cume-dist" class="headerlink" title="cume_dist"></a>cume_dist</h2><p>cume_dist() - Computes the position of a value relative to all values in the partition.</p>
<h2 id="current-database"><a href="#current-database" class="headerlink" title="current_database"></a>current_database</h2><p>current_database() - Returns the current database.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> current_database();</span><br><span class="line"> <span class="keyword">default</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="current-date"><a href="#current-date" class="headerlink" title="current_date"></a>current_date</h2><p>current_date() - Returns the current date at the start of query evaluation.</p>
<h2 id="current-timestamp"><a href="#current-timestamp" class="headerlink" title="current_timestamp"></a>current_timestamp</h2><p>current_timestamp() - Returns the current timestamp at the start of query evaluation.</p>
<h2 id="date"><a href="#date" class="headerlink" title="date"></a>date</h2><p>date(expr) - Casts the valueexprto the target data typedate.</p>
<h2 id="date-add"><a href="#date-add" class="headerlink" title="date_add"></a>date_add</h2><p>date_add(start_date, num_days) - Returns the date that isnum_daysafterstart_date.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> date_add(<span class="string">'2016-07-30'</span>, <span class="number">1</span>);</span><br><span class="line"> <span class="number">2016</span><span class="number">-07</span><span class="number">-31</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="date-format"><a href="#date-format" class="headerlink" title="date_format"></a>date_format</h2><p>date_format(timestamp, fmt) - Convertstimestampto a value of string in the format specified by the date formatfmt.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> date_format(<span class="string">'2016-04-08'</span>, <span class="string">'y'</span>);</span><br><span class="line"> <span class="number">2016</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="date-sub"><a href="#date-sub" class="headerlink" title="date_sub"></a>date_sub</h2><p>date_sub(start_date, num_days) - Returns the date that isnum_daysbeforestart_date.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> date_sub(<span class="string">'2016-07-30'</span>, <span class="number">1</span>);</span><br><span class="line"> <span class="number">2016</span><span class="number">-07</span><span class="number">-29</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="datediff"><a href="#datediff" class="headerlink" title="datediff"></a>datediff</h2><p>datediff(endDate, startDate) - Returns the number of days fromstartDatetoendDate.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> datediff(<span class="string">'2009-07-31'</span>, <span class="string">'2009-07-30'</span>);</span><br><span class="line"> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> datediff(<span class="string">'2009-07-30'</span>, <span class="string">'2009-07-31'</span>);</span><br><span class="line"> <span class="number">-1</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="day"><a href="#day" class="headerlink" title="day"></a>day</h2><p>day(date) - Returns the day of month of the date/timestamp.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">day</span>(<span class="string">'2009-07-30'</span>);</span><br><span class="line"> <span class="number">30</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="dayofmonth"><a href="#dayofmonth" class="headerlink" title="dayofmonth"></a>dayofmonth</h2><p>dayofmonth(date) - Returns the day of month of the date/timestamp.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> dayofmonth(<span class="string">'2009-07-30'</span>);</span><br><span class="line"> <span class="number">30</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="dayofweek"><a href="#dayofweek" class="headerlink" title="dayofweek"></a>dayofweek</h2><p>dayofweek(date) - Returns the day of the week for date/timestamp (1 = Sunday, 2 = Monday, …, 7 = Saturday).</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> dayofweek(<span class="string">'2009-07-30'</span>);</span><br><span class="line"> <span class="number">5</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="dayofyear"><a href="#dayofyear" class="headerlink" title="dayofyear"></a>dayofyear</h2><p>dayofyear(date) - Returns the day of year of the date/timestamp.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> dayofyear(<span class="string">'2016-04-09'</span>);</span><br><span class="line"> <span class="number">100</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="decimal"><a href="#decimal" class="headerlink" title="decimal"></a>decimal</h2><p>decimal(expr) - Casts the valueexprto the target data typedecimal.</p>
<h2 id="decode"><a href="#decode" class="headerlink" title="decode"></a>decode</h2><p>decode(bin, charset) - Decodes the first argument using the second argument character set.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> decode(encode(<span class="string">'abc'</span>, <span class="string">'utf-8'</span>), <span class="string">'utf-8'</span>);</span><br><span class="line"> abc</span><br></pre></td></tr></tbody></table></figure>



<h2 id="degrees"><a href="#degrees" class="headerlink" title="degrees"></a>degrees</h2><p>degrees(expr) - Converts radians to degrees.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> degrees(<span class="number">3.141592653589793</span>);</span><br><span class="line"> <span class="number">180.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="dense-rank"><a href="#dense-rank" class="headerlink" title="dense_rank"></a>dense_rank</h2><p>dense_rank() - Computes the rank of a value in a group of values. The result is one plus the previously assigned rank value. Unlike the function rank, dense_rank will not produce gaps in the ranking sequence.</p>
<h2 id="double"><a href="#double" class="headerlink" title="double"></a>double</h2><p>double(expr) - Casts the valueexprto the target data typedouble.</p>
<h2 id="e"><a href="#e" class="headerlink" title="e"></a>e</h2><p>e() - Returns Euler’s number, e.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> e();</span><br><span class="line"> <span class="number">2.718281828459045</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="elt"><a href="#elt" class="headerlink" title="elt"></a>elt</h2><p>elt(n, str1, str2, …) - Returns then-th string, e.g., returnsstr2whennis 2.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> elt(<span class="number">1</span>, <span class="string">'scala'</span>, <span class="string">'java'</span>);</span><br><span class="line"> scala</span><br></pre></td></tr></tbody></table></figure>



<h2 id="encode"><a href="#encode" class="headerlink" title="encode"></a>encode</h2><p>encode(str, charset) - Encodes the first argument using the second argument character set.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> encode(<span class="string">'abc'</span>, <span class="string">'utf-8'</span>);</span><br><span class="line"> abc</span><br></pre></td></tr></tbody></table></figure>



<h2 id="exp"><a href="#exp" class="headerlink" title="exp"></a>exp</h2><p>exp(expr) - Returns e to the power ofexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">exp</span>(<span class="number">0</span>);</span><br><span class="line"> <span class="number">1.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="explode"><a href="#explode" class="headerlink" title="explode"></a>explode</h2><p>explode(expr) - Separates the elements of arrayexprinto multiple rows, or the elements of mapexprinto multiple rows and columns.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> explode(<span class="keyword">array</span>(<span class="number">10</span>, <span class="number">20</span>));</span><br><span class="line"> <span class="number">10</span></span><br><span class="line"> <span class="number">20</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="explode-outer"><a href="#explode-outer" class="headerlink" title="explode_outer"></a>explode_outer</h2><p>explode_outer(expr) - Separates the elements of arrayexprinto multiple rows, or the elements of mapexprinto multiple rows and columns.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> explode_outer(<span class="keyword">array</span>(<span class="number">10</span>, <span class="number">20</span>));</span><br><span class="line"> <span class="number">10</span></span><br><span class="line"> <span class="number">20</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="expm1"><a href="#expm1" class="headerlink" title="expm1"></a>expm1</h2><p>expm1(expr) - Returns exp(expr) - 1.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> expm1(<span class="number">0</span>);</span><br><span class="line"> <span class="number">0.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="factorial"><a href="#factorial" class="headerlink" title="factorial"></a>factorial</h2><p>factorial(expr) - Returns the factorial ofexpr.expris [0..20]. Otherwise, null.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> factorial(<span class="number">5</span>);</span><br><span class="line"> <span class="number">120</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="find-in-set"><a href="#find-in-set" class="headerlink" title="find_in_set"></a>find_in_set</h2><p>find_in_set(str, str_array) - Returns the index (1-based) of the given string (str) in the comma-delimited list (str_array). Returns 0, if the string was not found or if the given string (str) contains a comma.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> find_in_set(<span class="string">'ab'</span>,<span class="string">'abc,b,ab,c,def'</span>);</span><br><span class="line"> <span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="first"><a href="#first" class="headerlink" title="first"></a>first</h2><p>first(expr[, isIgnoreNull]) - Returns the first value ofexprfor a group of rows. IfisIgnoreNullis true, returns only non-null values.</p>
<h2 id="first-value"><a href="#first-value" class="headerlink" title="first_value"></a>first_value</h2><p>first_value(expr[, isIgnoreNull]) - Returns the first value ofexprfor a group of rows. IfisIgnoreNullis true, returns only non-null values.</p>
<h2 id="float"><a href="#float" class="headerlink" title="float"></a>float</h2><p>float(expr) - Casts the valueexprto the target data typefloat.</p>
<h2 id="floor"><a href="#floor" class="headerlink" title="floor"></a>floor</h2><p>floor(expr) - Returns the largest integer not greater thanexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">floor</span>(<span class="number">-0.1</span>);</span><br><span class="line"> <span class="number">-1</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">floor</span>(<span class="number">5</span>);</span><br><span class="line"> <span class="number">5</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="format-number"><a href="#format-number" class="headerlink" title="format_number"></a>format_number</h2><p>format_number( expr1 ,  expr2 ) - Formats the number expr1 like ‘#,###,###.##’, rounded to expr2 decimal places. If expr2 is 0, the result has no decimal point or fractional part. This is supposed to function like MySQL’s FORMAT.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> format_number(<span class="number">12332.123456</span>, <span class="number">4</span>);</span><br><span class="line"> <span class="number">12</span>,<span class="number">332.1235</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="format-string"><a href="#format-string" class="headerlink" title="format_string"></a>format_string</h2><p>format_string(strfmt, obj, …) - Returns a formatted string from printf-style format strings.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> format_string("Hello World %d %s", <span class="number">100</span>, "days");</span><br><span class="line"> Hello World <span class="number">100</span> days</span><br></pre></td></tr></tbody></table></figure>



<h2 id="from-json"><a href="#from-json" class="headerlink" title="from_json"></a>from_json</h2><p>from_json(jsonStr, schema[, options]) - Returns a struct value with the givenjsonStrandschema.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> from_json(<span class="string">'{"a":1, "b":0.8}'</span>, <span class="string">'a INT, b DOUBLE'</span>);</span><br><span class="line"> {"a":<span class="number">1</span>, "b":<span class="number">0.8</span>}</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> from_json(<span class="string">'{"time":"26/08/2015"}'</span>, <span class="string">'time Timestamp'</span>, map(<span class="string">'timestampFormat'</span>, <span class="string">'dd/MM/yyyy'</span>));</span><br><span class="line"> {"time":"2015-08-26 00:00:00.0"}</span><br></pre></td></tr></tbody></table></figure>

<p>Since:2.2.0</p>
<h2 id="from-unixtime"><a href="#from-unixtime" class="headerlink" title="from_unixtime"></a>from_unixtime</h2><p>from_unixtime(unix_time, format) - Returnsunix_timein the specifiedformat.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> from_unixtime(<span class="number">0</span>, <span class="string">'yyyy-MM-dd HH:mm:ss'</span>);</span><br><span class="line"> <span class="number">1970</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="from-utc-timestamp"><a href="#from-utc-timestamp" class="headerlink" title="from_utc_timestamp"></a>from_utc_timestamp</h2><p>from_utc_timestamp(timestamp, timezone) - Given a timestamp, which corresponds to a certain time of day in UTC, returns another timestamp that corresponds to the same time of day in the given timezone.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> from_utc_timestamp(<span class="string">'2016-08-31'</span>, <span class="string">'Asia/Seoul'</span>);</span><br><span class="line"> <span class="number">2016</span><span class="number">-08</span><span class="number">-31</span> <span class="number">09</span>:<span class="number">00</span>:<span class="number">00</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="get-json-object"><a href="#get-json-object" class="headerlink" title="get_json_object"></a>get_json_object</h2><p>get_json_object(json_txt, path) - Extracts a json object frompath.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> get_json_object(<span class="string">'{"a":"b"}'</span>, <span class="string">'$.a'</span>);</span><br><span class="line"> b</span><br></pre></td></tr></tbody></table></figure>



<h2 id="greatest"><a href="#greatest" class="headerlink" title="greatest"></a>greatest</h2><p>greatest(expr, …) - Returns the greatest value of all parameters, skipping null values.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> greatest(<span class="number">10</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>);</span><br><span class="line"> <span class="number">10</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="grouping"><a href="#grouping" class="headerlink" title="grouping"></a>grouping</h2><h2 id="grouping-id"><a href="#grouping-id" class="headerlink" title="grouping_id"></a>grouping_id</h2><h2 id="hash"><a href="#hash" class="headerlink" title="hash"></a>hash</h2><p>hash( expr1 ,  expr2 , …) - Returns a hash value of the arguments.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> hash(<span class="string">'Spark'</span>, <span class="keyword">array</span>(<span class="number">123</span>), <span class="number">2</span>);</span><br><span class="line"> <span class="number">-1321691492</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="hex"><a href="#hex" class="headerlink" title="hex"></a>hex</h2><p>hex(expr) - Convertsexprto hexadecimal.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> hex(<span class="number">17</span>);</span><br><span class="line"> <span class="number">11</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> hex(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> <span class="number">537061726</span>B2053514C</span><br></pre></td></tr></tbody></table></figure>



<h2 id="hour"><a href="#hour" class="headerlink" title="hour"></a>hour</h2><p>hour(timestamp) - Returns the hour component of the string/timestamp.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">hour</span>(<span class="string">'2009-07-30 12:58:59'</span>);</span><br><span class="line"> <span class="number">12</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="hypot"><a href="#hypot" class="headerlink" title="hypot"></a>hypot</h2><p>hypot( expr1 ,  expr2 ) - Returns sqrt( expr1 2 + expr2).</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> hypot(<span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"> <span class="number">5.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="if"><a href="#if" class="headerlink" title="if"></a>if</h2><p>if( expr1 ,  expr2 ,  expr3 ) - If expr1 evaluates to true, then returns expr2 ; otherwise returns expr3 .</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> if(<span class="number">1</span> <span class="operator">&lt;</span> <span class="number">2</span>, <span class="string">'a'</span>, <span class="string">'b'</span>);</span><br><span class="line"> a</span><br></pre></td></tr></tbody></table></figure>



<h2 id="ifnull"><a href="#ifnull" class="headerlink" title="ifnull"></a>ifnull</h2><p>ifnull( expr1 ,  expr2 ) - Returns expr2 if expr1 is null, or expr1 otherwise.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> ifnull(<span class="keyword">NULL</span>, <span class="keyword">array</span>(<span class="string">'2'</span>));</span><br><span class="line"> ["2"]</span><br></pre></td></tr></tbody></table></figure>



<h2 id="in"><a href="#in" class="headerlink" title="in"></a>in</h2><p> expr1  in( expr2 ,  expr3 , …) - Returns true ifexprequals to any valN.</p>
<h2 id="initcap"><a href="#initcap" class="headerlink" title="initcap"></a>initcap</h2><p>initcap(str) - Returnsstrwith the first letter of each word in uppercase. All other letters are in lowercase. Words are delimited by white space.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> initcap(<span class="string">'sPark sql'</span>);</span><br><span class="line"> Spark <span class="keyword">Sql</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="inline"><a href="#inline" class="headerlink" title="inline"></a>inline</h2><p>inline(expr) - Explodes an array of structs into a table.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> inline(<span class="keyword">array</span>(struct(<span class="number">1</span>, <span class="string">'a'</span>), struct(<span class="number">2</span>, <span class="string">'b'</span>)));</span><br><span class="line"> <span class="number">1</span> a</span><br><span class="line"> <span class="number">2</span> b</span><br></pre></td></tr></tbody></table></figure>



<h2 id="inline-outer"><a href="#inline-outer" class="headerlink" title="inline_outer"></a>inline_outer</h2><p>inline_outer(expr) - Explodes an array of structs into a table.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> inline_outer(<span class="keyword">array</span>(struct(<span class="number">1</span>, <span class="string">'a'</span>), struct(<span class="number">2</span>, <span class="string">'b'</span>)));</span><br><span class="line"> <span class="number">1</span> a</span><br><span class="line"> <span class="number">2</span> b</span><br></pre></td></tr></tbody></table></figure>



<h2 id="input-file-block-length"><a href="#input-file-block-length" class="headerlink" title="input_file_block_length"></a>input_file_block_length</h2><p>input_file_block_length() - Returns the length of the block being read, or -1 if not available.</p>
<h2 id="input-file-block-start"><a href="#input-file-block-start" class="headerlink" title="input_file_block_start"></a>input_file_block_start</h2><p>input_file_block_start() - Returns the start offset of the block being read, or -1 if not available.</p>
<h2 id="input-file-name"><a href="#input-file-name" class="headerlink" title="input_file_name"></a>input_file_name</h2><p>input_file_name() - Returns the name of the file being read, or empty string if not available.</p>
<h2 id="instr"><a href="#instr" class="headerlink" title="instr"></a>instr</h2><p>instr(str, substr) - Returns the (1-based) index of the first occurrence ofsubstrinstr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> instr(<span class="string">'SparkSQL'</span>, <span class="string">'SQL'</span>);</span><br><span class="line"> <span class="number">6</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="int"><a href="#int" class="headerlink" title="int"></a>int</h2><p>int(expr) - Casts the valueexprto the target data typeint.</p>
<h2 id="isnan"><a href="#isnan" class="headerlink" title="isnan"></a>isnan</h2><p>isnan(expr) - Returns true ifexpris NaN, or false otherwise.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> isnan(<span class="built_in">cast</span>(<span class="string">'NaN'</span> <span class="keyword">as</span> <span class="keyword">double</span>));</span><br><span class="line"> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="isnotnull"><a href="#isnotnull" class="headerlink" title="isnotnull"></a>isnotnull</h2><p>isnotnull(expr) - Returns true ifexpris not null, or false otherwise.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> isnotnull(<span class="number">1</span>);</span><br><span class="line"> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="isnull"><a href="#isnull" class="headerlink" title="isnull"></a>isnull</h2><p>isnull(expr) - Returns true ifexpris null, or false otherwise.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> isnull(<span class="number">1</span>);</span><br><span class="line"> <span class="literal">false</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="java-method"><a href="#java-method" class="headerlink" title="java_method"></a>java_method</h2><p>java_method(class, method[, arg1[, arg2 ..]]) - Calls a method with reflection.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> java_method(<span class="string">'java.util.UUID'</span>, <span class="string">'randomUUID'</span>);</span><br><span class="line"> c33fb387<span class="number">-8500</span><span class="number">-4</span>bfa<span class="number">-81</span>d2<span class="number">-6e0</span>e3e930df2</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> java_method(<span class="string">'java.util.UUID'</span>, <span class="string">'fromString'</span>, <span class="string">'a5cf6c42-0c85-418f-af6c-3e4e5b1328f2'</span>);</span><br><span class="line"> a5cf6c42<span class="number">-0</span>c85<span class="number">-418</span>f<span class="operator">-</span>af6c<span class="number">-3e4</span>e5b1328f2</span><br></pre></td></tr></tbody></table></figure>



<h2 id="json-tuple"><a href="#json-tuple" class="headerlink" title="json_tuple"></a>json_tuple</h2><p>json_tuple(jsonStr, p1, p2, …, pn) - Returns a tuple like the function get_json_object, but it takes multiple names. All the input parameters and output column types are string.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> json_tuple(<span class="string">'{"a":1, "b":2}'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>);</span><br><span class="line"> <span class="number">1</span> <span class="number">2</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="kurtosis"><a href="#kurtosis" class="headerlink" title="kurtosis"></a>kurtosis</h2><p>kurtosis(expr) - Returns the kurtosis value calculated from values of a group.</p>
<h2 id="lag"><a href="#lag" class="headerlink" title="lag"></a>lag</h2><p>lag(input[, offset[, default]]) - Returns the value ofinputat theoffsetth row before the current row in the window. The default value ofoffsetis 1 and the default value ofdefaultis null. If the value ofinputat theoffsetth row is null, null is returned. If there is no such offset row (e.g., when the offset is 1, the first row of the window does not have any previous row),defaultis returned.</p>
<h2 id="last"><a href="#last" class="headerlink" title="last"></a>last</h2><p>last(expr[, isIgnoreNull]) - Returns the last value ofexprfor a group of rows. IfisIgnoreNullis true, returns only non-null values.</p>
<h2 id="last-day"><a href="#last-day" class="headerlink" title="last_day"></a>last_day</h2><p>last_day(date) - Returns the last day of the month which the date belongs to.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> last_day(<span class="string">'2009-01-12'</span>);</span><br><span class="line"> <span class="number">2009</span><span class="number">-01</span><span class="number">-31</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="last-value"><a href="#last-value" class="headerlink" title="last_value"></a>last_value</h2><p>last_value(expr[, isIgnoreNull]) - Returns the last value ofexprfor a group of rows. IfisIgnoreNullis true, returns only non-null values.</p>
<h2 id="lcase"><a href="#lcase" class="headerlink" title="lcase"></a>lcase</h2><p>lcase(str) - Returnsstrwith all characters changed to lowercase.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> lcase(<span class="string">'SparkSql'</span>);</span><br><span class="line"> sparksql</span><br></pre></td></tr></tbody></table></figure>



<h2 id="lead"><a href="#lead" class="headerlink" title="lead"></a>lead</h2><p>lead(input[, offset[, default]]) - Returns the value ofinputat theoffsetth row after the current row in the window. The default value ofoffsetis 1 and the default value ofdefaultis null. If the value ofinputat theoffsetth row is null, null is returned. If there is no such an offset row (e.g., when the offset is 1, the last row of the window does not have any subsequent row),defaultis returned.</p>
<h2 id="least"><a href="#least" class="headerlink" title="least"></a>least</h2><p>least(expr, …) - Returns the least value of all parameters, skipping null values.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> least(<span class="number">10</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>);</span><br><span class="line"> <span class="number">2</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="left"><a href="#left" class="headerlink" title="left"></a>left</h2><p>left(str, len) - Returns the leftmostlen(lencan be string type) characters from the stringstr,iflenis less or equal than 0 the result is an empty string.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">left</span>(<span class="string">'Spark SQL'</span>, <span class="number">3</span>);</span><br><span class="line"> Spa</span><br></pre></td></tr></tbody></table></figure>



<h2 id="length"><a href="#length" class="headerlink" title="length"></a>length</h2><p>length(expr) - Returns the character length ofexpror number of bytes in binary data.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> length(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> <span class="number">9</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">CHAR_LENGTH</span>(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> <span class="number">9</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">CHARACTER_LENGTH</span>(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> <span class="number">9</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="levenshtein"><a href="#levenshtein" class="headerlink" title="levenshtein"></a>levenshtein</h2><p>levenshtein(str1, str2) - Returns the Levenshtein distance between the two given strings.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> levenshtein(<span class="string">'kitten'</span>, <span class="string">'sitting'</span>);</span><br><span class="line"> <span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="like"><a href="#like" class="headerlink" title="like"></a>like</h2><p>str like pattern - Returns true if str matches pattern, null if any arguments are null, false otherwise.</p>
<p>Arguments:</p>
<p>str - a string expression</p>
<p>pattern - a string expression. The pattern is a string which is matched literally, with exception to the following special symbols:</p>
<p>_ matches any one character in the input (similar to . in posix regular expressions)</p>
<p>% matches zero or more characters in the input (similar to .* in posix regular expressions)</p>
<p>The escape character is ‘'. If an escape character precedes a special symbol or another escape character, the following character is matched literally. It is invalid to escape any other character.</p>
<p>Since Spark 2.0, string literals are unescaped in our SQL parser. For example, in order to match “\abc”, the pattern should be “\abc”.</p>
<p>When SQL config ‘spark.sql.parser.escapedStringLiterals’ is enabled, it fallbacks to Spark 1.6 behavior regarding string literal parsing. For example, if the config is enabled, the pattern to match “\abc” should be “\abc”.</p>
<p>示例</p>
<blockquote>
<p>SELECT ‘%SystemDrive%\Users\John’ like ‘%SystemDrive%\Users%’<br> true</p>
</blockquote>
<p>Note:</p>
<p>Use RLIKE to match with standard regular expressions.</p>
<h2 id="ln"><a href="#ln" class="headerlink" title="ln"></a>ln</h2><p>ln(expr) - Returns the natural logarithm (base e) ofexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">ln</span>(<span class="number">1</span>);</span><br><span class="line"> <span class="number">0.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h2><p>locate(substr, str[, pos]) - Returns the position of the first occurrence ofsubstrinstrafter positionpos. The givenposand return value are 1-based.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> locate(<span class="string">'bar'</span>, <span class="string">'foobarbar'</span>);</span><br><span class="line"> <span class="number">4</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> locate(<span class="string">'bar'</span>, <span class="string">'foobarbar'</span>, <span class="number">5</span>);</span><br><span class="line"> <span class="number">7</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">POSITION</span>(<span class="string">'bar'</span> <span class="keyword">IN</span> <span class="string">'foobarbar'</span>);</span><br><span class="line"> <span class="number">4</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="log"><a href="#log" class="headerlink" title="log"></a>log</h2><p>log(base, expr) - Returns the logarithm ofexprwithbase.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">log</span>(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line"> <span class="number">2.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="log10"><a href="#log10" class="headerlink" title="log10"></a>log10</h2><p>log10(expr) - Returns the logarithm ofexprwith base 10.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">log10</span>(<span class="number">10</span>);</span><br><span class="line"> <span class="number">1.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="log1p"><a href="#log1p" class="headerlink" title="log1p"></a>log1p</h2><p>log1p(expr) - Returns log(1 +expr).</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> log1p(<span class="number">0</span>);</span><br><span class="line"> <span class="number">0.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="log2"><a href="#log2" class="headerlink" title="log2"></a>log2</h2><p>log2(expr) - Returns the logarithm ofexprwith base 2.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> log2(<span class="number">2</span>);</span><br><span class="line"> <span class="number">1.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="lower"><a href="#lower" class="headerlink" title="lower"></a>lower</h2><p>lower(str) - Returnsstrwith all characters changed to lowercase.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">lower</span>(<span class="string">'SparkSql'</span>);</span><br><span class="line"> sparksql</span><br></pre></td></tr></tbody></table></figure>



<h2 id="lpad"><a href="#lpad" class="headerlink" title="lpad"></a>lpad</h2><p>lpad(str, len, pad) - Returnsstr, left-padded withpadto a length oflen. Ifstris longer thanlen, the return value is shortened tolencharacters.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> lpad(<span class="string">'hi'</span>, <span class="number">5</span>, <span class="string">''</span>);</span><br><span class="line"> hi</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> lpad(<span class="string">'hi'</span>, <span class="number">1</span>, <span class="string">''</span>);</span><br><span class="line"> h</span><br></pre></td></tr></tbody></table></figure>



<h2 id="ltrim"><a href="#ltrim" class="headerlink" title="ltrim"></a>ltrim</h2><p>ltrim(str) - Removes the leading and trailing space characters fromstr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> ltrim(<span class="string">'  SparkSQL'</span>);</span><br><span class="line"> SparkSQL</span><br></pre></td></tr></tbody></table></figure>



<h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><p>map(key0, value0, key1, value1, …) - Creates a map with the given key/value pairs.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> map(<span class="number">1.0</span>, <span class="string">'2'</span>, <span class="number">3.0</span>, <span class="string">'4'</span>);</span><br><span class="line"> {<span class="number">1.0</span>:"2",<span class="number">3.0</span>:"4"}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="map-keys"><a href="#map-keys" class="headerlink" title="map_keys"></a>map_keys</h2><p>map_keys(map) - Returns an unordered array containing the keys of the map.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> map_keys(map(<span class="number">1</span>, <span class="string">'a'</span>, <span class="number">2</span>, <span class="string">'b'</span>));</span><br><span class="line"> [<span class="number">1</span>,<span class="number">2</span>]</span><br></pre></td></tr></tbody></table></figure>



<h2 id="map-values"><a href="#map-values" class="headerlink" title="map_values"></a>map_values</h2><p>map_values(map) - Returns an unordered array containing the values of the map.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> map_values(map(<span class="number">1</span>, <span class="string">'a'</span>, <span class="number">2</span>, <span class="string">'b'</span>));</span><br><span class="line"> ["a","b"]</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="max"><a href="#max" class="headerlink" title="max"></a>max</h2><p>max(expr) - Returns the maximum value ofexpr.</p>
<h2 id="md5"><a href="#md5" class="headerlink" title="md5"></a>md5</h2><p>md5(expr) - Returns an MD5 128-bit checksum as a hex string ofexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> md5(<span class="string">'Spark'</span>);</span><br><span class="line"> <span class="number">8</span>cde774d6f7333752ed72cacddb05126</span><br></pre></td></tr></tbody></table></figure>



<h2 id="mean"><a href="#mean" class="headerlink" title="mean"></a>mean</h2><p>mean(expr) - Returns the mean calculated from values of a group.</p>
<h2 id="min"><a href="#min" class="headerlink" title="min"></a>min</h2><p>min(expr) - Returns the minimum value ofexpr.</p>
<h2 id="minute"><a href="#minute" class="headerlink" title="minute"></a>minute</h2><p>minute(timestamp) - Returns the minute component of the string/timestamp.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">minute</span>(<span class="string">'2009-07-30 12:58:59'</span>);</span><br><span class="line"> <span class="number">58</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="mod"><a href="#mod" class="headerlink" title="mod"></a>mod</h2><p> expr1  mod  expr2  - Returns the remainder after expr1 / expr2 .</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">2</span> mod <span class="number">1.8</span>;</span><br><span class="line"> <span class="number">0.2</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">MOD</span>(<span class="number">2</span>, <span class="number">1.8</span>);</span><br><span class="line"> <span class="number">0.2</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="monotonically-increasing-id"><a href="#monotonically-increasing-id" class="headerlink" title="monotonically_increasing_id"></a>monotonically_increasing_id</h2><p>monotonically_increasing_id() - Returns monotonically increasing 64-bit integers. The generated ID is guaranteed to be monotonically increasing and unique, but not consecutive. The current implementation puts the partition ID in the upper 31 bits, and the lower 33 bits represent the record number within each partition. The assumption is that the data frame has less than 1 billion partitions, and each partition has less than 8 billion records.</p>
<h2 id="month"><a href="#month" class="headerlink" title="month"></a>month</h2><p>month(date) - Returns the month component of the date/timestamp.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">month</span>(<span class="string">'2016-07-30'</span>);</span><br><span class="line"> <span class="number">7</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="months-between"><a href="#months-between" class="headerlink" title="months_between"></a>months_between</h2><p>months_between(timestamp1, timestamp2) - Returns number of months betweentimestamp1andtimestamp2.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> months_between(<span class="string">'1997-02-28 10:30:00'</span>, <span class="string">'1996-10-30'</span>);</span><br><span class="line"> <span class="number">3.94959677</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="named-struct"><a href="#named-struct" class="headerlink" title="named_struct"></a>named_struct</h2><p>named_struct(name1, val1, name2, val2, …) - Creates a struct with the given field names and values.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> named_struct("a", <span class="number">1</span>, "b", <span class="number">2</span>, "c", <span class="number">3</span>);</span><br><span class="line"> {"a":<span class="number">1</span>,"b":<span class="number">2</span>,"c":<span class="number">3</span>}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="nanvl"><a href="#nanvl" class="headerlink" title="nanvl"></a>nanvl</h2><p>nanvl( expr1 ,  expr2 ) - Returns expr1 if it’s not NaN, or expr2 otherwise.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> nanvl(<span class="built_in">cast</span>(<span class="string">'NaN'</span> <span class="keyword">as</span> <span class="keyword">double</span>), <span class="number">123</span>);</span><br><span class="line"> <span class="number">123.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="negative"><a href="#negative" class="headerlink" title="negative"></a>negative</h2><p>negative(expr) - Returns the negated value ofexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> negative(<span class="number">1</span>);</span><br><span class="line"> <span class="number">-1</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="next-day"><a href="#next-day" class="headerlink" title="next_day"></a>next_day</h2><p>next_day(start_date, day_of_week) - Returns the first date which is later thanstart_dateand named as indicated.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> next_day(<span class="string">'2015-01-14'</span>, <span class="string">'TU'</span>);</span><br><span class="line"> <span class="number">2015</span><span class="number">-01</span><span class="number">-20</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="not"><a href="#not" class="headerlink" title="not"></a>not</h2><p>not expr - Logical not.</p>
<h2 id="now"><a href="#now" class="headerlink" title="now"></a>now</h2><p>now() - Returns the current timestamp at the start of query evaluation.</p>
<h2 id="ntile"><a href="#ntile" class="headerlink" title="ntile"></a>ntile</h2><p>ntile(n) - Divides the rows for each window partition intonbuckets ranging from 1 to at mostn.</p>
<h2 id="nullif"><a href="#nullif" class="headerlink" title="nullif"></a>nullif</h2><p>nullif( expr1 ,  expr2 ) - Returns null if expr1 equals to expr2 , or expr1 otherwise.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">nullif</span>(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line"> <span class="keyword">NULL</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="nvl"><a href="#nvl" class="headerlink" title="nvl"></a>nvl</h2><p>nvl( expr1 ,  expr2 ) - Returns expr2 if expr1 is null, or expr1 otherwise.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> nvl(<span class="keyword">NULL</span>, <span class="keyword">array</span>(<span class="string">'2'</span>));</span><br><span class="line"> ["2"]</span><br></pre></td></tr></tbody></table></figure>



<h2 id="nvl2"><a href="#nvl2" class="headerlink" title="nvl2"></a>nvl2</h2><p>nvl2( expr1 ,  expr2 ,  expr3 ) - Returns expr2 if expr1 is not null, or expr3 otherwise.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> nvl2(<span class="keyword">NULL</span>, <span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"> <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="octet-length"><a href="#octet-length" class="headerlink" title="octet_length"></a>octet_length</h2><p>octet_length(expr) - Returns the byte length ofexpror number of bytes in binary data.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">octet_length</span>(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> <span class="number">9</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="or"><a href="#or" class="headerlink" title="or"></a>or</h2><p> expr1  or  expr2  - Logical OR.</p>
<h2 id="parse-url"><a href="#parse-url" class="headerlink" title="parse_url"></a>parse_url</h2><p>parse_url(url, partToExtract[, key]) - Extracts a part from a URL.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> parse_url(<span class="string">'http://spark.apache.org/pathquery=1'</span>, <span class="string">'HOST'</span>)</span><br><span class="line"> spark.apache.org</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> parse_url(<span class="string">'http://spark.apache.org/pathquery=1'</span>, <span class="string">'QUERY'</span>)</span><br><span class="line"> query<span class="operator">=</span><span class="number">1</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> parse_url(<span class="string">'http://spark.apache.org/pathquery=1'</span>, <span class="string">'QUERY'</span>, <span class="string">'query'</span>)</span><br><span class="line"> <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="percent-rank"><a href="#percent-rank" class="headerlink" title="percent_rank"></a>percent_rank</h2><p>percent_rank() - Computes the percentage ranking of a value in a group of values.</p>
<h2 id="percentile"><a href="#percentile" class="headerlink" title="percentile"></a>percentile</h2><p>percentile(col, percentage [, frequency]) - Returns the exact percentile value of numeric columncolat the given percentage. The value of percentage must be between 0.0 and 1.0. The value of frequency should be positive integral</p>
<p>percentile(col, array(percentage1 [, percentage2]…) [, frequency]) - Returns the exact percentile value array of numeric columncolat the given percentage(s). Each value of the percentage array must be between 0.0 and 1.0. The value of frequency should be positive integral</p>
<h2 id="percentile-approx"><a href="#percentile-approx" class="headerlink" title="percentile_approx"></a>percentile_approx</h2><p>percentile_approx(col, percentage [, accuracy]) - Returns the approximate percentile value of numeric columncolat the given percentage. The value of percentage must be between 0.0 and 1.0. Theaccuracyparameter (default: 10000) is a positive numeric literal which controls approximation accuracy at the cost of memory. Higher value ofaccuracyyields better accuracy,1.0/accuracyis the relative error of the approximation. Whenpercentageis an array, each value of the percentage array must be between 0.0 and 1.0. In this case, returns the approximate percentile array of columncolat the given percentage array.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> percentile_approx(<span class="number">10.0</span>, <span class="keyword">array</span>(<span class="number">0.5</span>, <span class="number">0.4</span>, <span class="number">0.1</span>), <span class="number">100</span>);</span><br><span class="line"> [<span class="number">10.0</span>,<span class="number">10.0</span>,<span class="number">10.0</span>]</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> percentile_approx(<span class="number">10.0</span>, <span class="number">0.5</span>, <span class="number">100</span>);</span><br><span class="line"> <span class="number">10.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="pi"><a href="#pi" class="headerlink" title="pi"></a>pi</h2><p>pi() - Returns pi.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> pi();</span><br><span class="line"> <span class="number">3.141592653589793</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="pmod"><a href="#pmod" class="headerlink" title="pmod"></a>pmod</h2><p>pmod( expr1 ,  expr2 ) - Returns the positive value of expr1 mod expr2 .</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> pmod(<span class="number">10</span>, <span class="number">3</span>);</span><br><span class="line"> <span class="number">1</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> pmod(<span class="number">-10</span>, <span class="number">3</span>);</span><br><span class="line"> <span class="number">2</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="posexplode"><a href="#posexplode" class="headerlink" title="posexplode"></a>posexplode</h2><p>posexplode(expr) - Separates the elements of arrayexprinto multiple rows with positions, or the elements of mapexprinto multiple rows and columns with positions.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> posexplode(<span class="keyword">array</span>(<span class="number">10</span>,<span class="number">20</span>));</span><br><span class="line"> <span class="number">0</span> <span class="number">10</span></span><br><span class="line"> <span class="number">1</span> <span class="number">20</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="posexplode-outer"><a href="#posexplode-outer" class="headerlink" title="posexplode_outer"></a>posexplode_outer</h2><p>posexplode_outer(expr) - Separates the elements of arrayexprinto multiple rows with positions, or the elements of mapexprinto multiple rows and columns with positions.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> posexplode_outer(<span class="keyword">array</span>(<span class="number">10</span>,<span class="number">20</span>));</span><br><span class="line"> <span class="number">0</span> <span class="number">10</span></span><br><span class="line"> <span class="number">1</span> <span class="number">20</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="position"><a href="#position" class="headerlink" title="position"></a>position</h2><p>position(substr, str[, pos]) - Returns the position of the first occurrence ofsubstrinstrafter positionpos. The givenposand return value are 1-based.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">position</span>(<span class="string">'bar'</span>, <span class="string">'foobarbar'</span>);</span><br><span class="line"> <span class="number">4</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">position</span>(<span class="string">'bar'</span>, <span class="string">'foobarbar'</span>, <span class="number">5</span>);</span><br><span class="line"> <span class="number">7</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">POSITION</span>(<span class="string">'bar'</span> <span class="keyword">IN</span> <span class="string">'foobarbar'</span>);</span><br><span class="line"> <span class="number">4</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="positive"><a href="#positive" class="headerlink" title="positive"></a>positive</h2><p>positive(expr) - Returns the value ofexpr.</p>
<h2 id="pow"><a href="#pow" class="headerlink" title="pow"></a>pow</h2><p>pow( expr1 ,  expr2 ) - Raises expr1 to the power of expr2 .</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> pow(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"> <span class="number">8.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="power"><a href="#power" class="headerlink" title="power"></a>power</h2><p>power( expr1 ,  expr2 ) - Raises expr1 to the power of expr2 .</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">power</span>(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"> <span class="number">8.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h2><p>printf(strfmt, obj, …) - Returns a formatted string from printf-style format strings.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> printf("Hello World %d %s", <span class="number">100</span>, "days");</span><br><span class="line"> Hello World <span class="number">100</span> days</span><br></pre></td></tr></tbody></table></figure>



<h2 id="quarter"><a href="#quarter" class="headerlink" title="quarter"></a>quarter</h2><p>quarter(date) - Returns the quarter of the year for date, in the range 1 to 4.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> quarter(<span class="string">'2016-08-31'</span>);</span><br><span class="line"> <span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="radians"><a href="#radians" class="headerlink" title="radians"></a>radians</h2><p>radians(expr) - Converts degrees to radians.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> radians(<span class="number">180</span>);</span><br><span class="line"> <span class="number">3.141592653589793</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="rand"><a href="#rand" class="headerlink" title="rand"></a>rand</h2><p>rand([seed]) - Returns a random value with independent and identically distributed (i.i.d.) uniformly distributed values in [0, 1).</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> rand();</span><br><span class="line"> <span class="number">0.9629742951434543</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> rand(<span class="number">0</span>);</span><br><span class="line"> <span class="number">0.8446490682263027</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> rand(<span class="keyword">null</span>);</span><br><span class="line"> <span class="number">0.8446490682263027</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="randn"><a href="#randn" class="headerlink" title="randn"></a>randn</h2><p>randn([seed]) - Returns a random value with independent and identically distributed (i.i.d.) values drawn from the standard normal distribution.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> randn();</span><br><span class="line"> <span class="number">-0.3254147983080288</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> randn(<span class="number">0</span>);</span><br><span class="line"> <span class="number">1.1164209726833079</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> randn(<span class="keyword">null</span>);</span><br><span class="line"> <span class="number">1.1164209726833079</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="rank"><a href="#rank" class="headerlink" title="rank"></a>rank</h2><p>rank() - Computes the rank of a value in a group of values. The result is one plus the number of rows preceding or equal to the current row in the ordering of the partition. The values will produce gaps in the sequence.</p>
<h2 id="reflect"><a href="#reflect" class="headerlink" title="reflect"></a>reflect</h2><p>reflect(class, method[, arg1[, arg2 ..]]) - Calls a method with reflection.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> reflect(<span class="string">'java.util.UUID'</span>, <span class="string">'randomUUID'</span>);</span><br><span class="line"> c33fb387<span class="number">-8500</span><span class="number">-4</span>bfa<span class="number">-81</span>d2<span class="number">-6e0</span>e3e930df2</span><br><span class="line"> <span class="operator">&gt;</span> <span class="keyword">SELECT</span> reflect(<span class="string">'java.util.UUID'</span>, <span class="string">'fromString'</span>, <span class="string">'a5cf6c42-0c85-418f-af6c-3e4e5b1328f2'</span>);</span><br><span class="line"> a5cf6c42<span class="number">-0</span>c85<span class="number">-418</span>f<span class="operator">-</span>af6c<span class="number">-3e4</span>e5b1328f2</span><br></pre></td></tr></tbody></table></figure>



<h2 id="regexp-extract"><a href="#regexp-extract" class="headerlink" title="regexp_extract"></a>regexp_extract</h2><p>regexp_extract(str, regexp[, idx]) - Extracts a group that matchesregexp.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> regexp_extract(<span class="string">'100-200'</span>, <span class="string">'(\d+)-(\d+)'</span>, <span class="number">1</span>);</span><br><span class="line"> <span class="number">100</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="regexp-replace"><a href="#regexp-replace" class="headerlink" title="regexp_replace"></a>regexp_replace</h2><p>regexp_replace(str, regexp, rep) - Replaces all substrings ofstrthat matchregexpwithrep.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> regexp_replace(<span class="string">'100-200'</span>, <span class="string">'(\d+)'</span>, <span class="string">'num'</span>);</span><br><span class="line"> num<span class="operator">-</span>num</span><br></pre></td></tr></tbody></table></figure>



<h2 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h2><p>repeat(str, n) - Returns the string which repeats the given string value n times.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> repeat(<span class="string">'123'</span>, <span class="number">2</span>);</span><br><span class="line"> <span class="number">123123</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h2><p>replace(str, search[, replace]) - Replaces all occurrences ofsearchwithreplace.</p>
<p>Arguments:</p>
<p>str - a string expression</p>
<p>search - a string expression. Ifsearchis not found instr,stris returned unchanged.</p>
<p>replace - a string expression. Ifreplaceis not specified or is an empty string, nothing replaces the string that is removed fromstr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> replace(<span class="string">'ABCabc'</span>, <span class="string">'abc'</span>, <span class="string">'DEF'</span>);</span><br><span class="line"> ABCDEF</span><br></pre></td></tr></tbody></table></figure>



<h2 id="reverse"><a href="#reverse" class="headerlink" title="reverse"></a>reverse</h2><p>reverse(str) - Returns the reversed given string.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> reverse(<span class="string">'Spark SQL'</span>);</span><br><span class="line"> LQS krapS</span><br></pre></td></tr></tbody></table></figure>



<h2 id="right"><a href="#right" class="headerlink" title="right"></a>right</h2><p>right(str, len) - Returns the rightmostlen(lencan be string type) characters from the stringstr,iflenis less or equal than 0 the result is an empty string.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">right</span>(<span class="string">'Spark SQL'</span>, <span class="number">3</span>);</span><br><span class="line"> <span class="keyword">SQL</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="rint"><a href="#rint" class="headerlink" title="rint"></a>rint</h2><p>rint(expr) - Returns the double value that is closest in value to the argument and is equal to a mathematical integer.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> rint(<span class="number">12.3456</span>);</span><br><span class="line"> <span class="number">12.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="rlike"><a href="#rlike" class="headerlink" title="rlike"></a>rlike</h2><p>str rlike regexp - Returns true ifstrmatchesregexp, or false otherwise.</p>
<p>Arguments:</p>
<p>str - a string expression</p>
<p>regexp - a string expression. The pattern string should be a <a target="_blank" rel="noopener" href="https://www.2cto.com/kf/ware/Java/">Java</a> regular expression.</p>
<p>Since Spark 2.0, string literals (including regex patterns) are unescaped in our SQL parser. For example, to match “\abc”, a regular expression forregexpcan be “^\abc$”.</p>
<p>There is a SQL config ‘spark.sql.parser.escapedStringLiterals’ that can be used to fallback to the Spark 1.6 behavior regarding string literal parsing. For example, if the config is enabled, theregexpthat can match “\abc” is “^\abc$”.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">When</span> spark.sql.parser.escapedStringLiterals <span class="keyword">is</span> disabled (<span class="keyword">default</span>).</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="string">'%SystemDrive%\Users\John'</span> rlike <span class="string">'%SystemDrive%\\Users.*'</span></span><br><span class="line"> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">When</span> spark.sql.parser.escapedStringLiterals <span class="keyword">is</span> enabled.</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="string">'%SystemDrive%\Users\John'</span> rlike <span class="string">'%SystemDrive%\Users.*'</span></span><br><span class="line"> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="Note"><a href="#Note" class="headerlink" title="Note:"></a>Note:</h2><p>Use LIKE to match with simple string pattern.</p>
<h2 id="rollup"><a href="#rollup" class="headerlink" title="rollup"></a>rollup</h2><h2 id="round"><a href="#round" class="headerlink" title="round"></a>round</h2><p>round(expr, d) - Returnsexprrounded toddecimal places using HALF_UP rounding mode.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> round(<span class="number">2.5</span>, <span class="number">0</span>);</span><br><span class="line"> <span class="number">3.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="row-number"><a href="#row-number" class="headerlink" title="row_number"></a>row_number</h2><p>row_number() - Assigns a unique, sequential number to each row, starting with one, according to the ordering of rows within the window partition.</p>
<h2 id="rpad"><a href="#rpad" class="headerlink" title="rpad"></a>rpad</h2><p>rpad(str, len, pad) - Returnsstr, right-padded withpadto a length oflen. Ifstris longer thanlen, the return value is shortened tolencharacters.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> rpad(<span class="string">'hi'</span>, <span class="number">5</span>, <span class="string">''</span>);</span><br><span class="line"> hi</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> rpad(<span class="string">'hi'</span>, <span class="number">1</span>, <span class="string">''</span>);</span><br><span class="line"> h</span><br></pre></td></tr></tbody></table></figure>



<h2 id="rtrim"><a href="#rtrim" class="headerlink" title="rtrim"></a>rtrim</h2><p>rtrim(str) - Removes the trailing space characters fromstr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> rtrim(<span class="string">'  SparkSQL  '</span>);</span><br><span class="line">   SparkSQL</span><br></pre></td></tr></tbody></table></figure>



<h2 id="second"><a href="#second" class="headerlink" title="second"></a>second</h2><p>second(timestamp) - Returns the second component of the string/timestamp.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">second</span>(<span class="string">'2009-07-30 12:58:59'</span>);</span><br><span class="line"> <span class="number">59</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="sentences"><a href="#sentences" class="headerlink" title="sentences"></a>sentences</h2><p>sentences(str[, lang, country]) - Splitsstrinto an array of array of words.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> sentences(<span class="string">'Hi there! Good morning.'</span>);</span><br><span class="line"> [["Hi","there"],["Good","morning"]]</span><br></pre></td></tr></tbody></table></figure>



<h2 id="sha"><a href="#sha" class="headerlink" title="sha"></a>sha</h2><p>sha(expr) - Returns a sha1 hash value as a hex string of theexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> sha(<span class="string">'Spark'</span>);</span><br><span class="line"> <span class="number">85</span>f5955f4b27a9a4c2aab6ffe5d7189fc298b92c</span><br></pre></td></tr></tbody></table></figure>



<h2 id="sha1"><a href="#sha1" class="headerlink" title="sha1"></a>sha1</h2><p>sha1(expr) - Returns a sha1 hash value as a hex string of theexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> sha1(<span class="string">'Spark'</span>);</span><br><span class="line"> <span class="number">85</span>f5955f4b27a9a4c2aab6ffe5d7189fc298b92c</span><br></pre></td></tr></tbody></table></figure>



<h2 id="sha2"><a href="#sha2" class="headerlink" title="sha2"></a>sha2</h2><p>sha2(expr, bitLength) - Returns a checksum of SHA-2 family as a hex string ofexpr. SHA-224, SHA-256, SHA-384, and SHA-512 are supported. Bit length of 0 is equivalent to 256.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> sha2(<span class="string">'Spark'</span>, <span class="number">256</span>);</span><br><span class="line"> <span class="number">529</span>bc3b07127ecb7e53a4dcf1991d9152c24537d919178022b2c42657f79a26b</span><br></pre></td></tr></tbody></table></figure>



<h2 id="shiftleft"><a href="#shiftleft" class="headerlink" title="shiftleft"></a>shiftleft</h2><p>shiftleft(base, expr) - Bitwise left shift.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> shiftleft(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"> <span class="number">4</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="shiftright"><a href="#shiftright" class="headerlink" title="shiftright"></a>shiftright</h2><p>shiftright(base, expr) - Bitwise (signed) right shift.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> shiftright(<span class="number">4</span>, <span class="number">1</span>);</span><br><span class="line"> <span class="number">2</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="shiftrightunsigned"><a href="#shiftrightunsigned" class="headerlink" title="shiftrightunsigned"></a>shiftrightunsigned</h2><p>shiftrightunsigned(base, expr) - Bitwise unsigned right shift.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> shiftrightunsigned(<span class="number">4</span>, <span class="number">1</span>);</span><br><span class="line"> <span class="number">2</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="sign"><a href="#sign" class="headerlink" title="sign"></a>sign</h2><p>sign(expr) - Returns -1.0, 0.0 or 1.0 asexpris negative, 0 or positive.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> sign(<span class="number">40</span>);</span><br><span class="line"> <span class="number">1.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="signum"><a href="#signum" class="headerlink" title="signum"></a>signum</h2><p>signum(expr) - Returns -1.0, 0.0 or 1.0 asexpris negative, 0 or positive.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> signum(<span class="number">40</span>);</span><br><span class="line"> <span class="number">1.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="sin"><a href="#sin" class="headerlink" title="sin"></a>sin</h2><p>sin(expr) - Returns the sine ofexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">sin</span>(<span class="number">0</span>);</span><br><span class="line"> <span class="number">0.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="sinh"><a href="#sinh" class="headerlink" title="sinh"></a>sinh</h2><p>sinh(expr) - Returns the hyperbolic sine ofexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">sinh</span>(<span class="number">0</span>);</span><br><span class="line"> <span class="number">0.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="size"><a href="#size" class="headerlink" title="size"></a>size</h2><p>size(expr) - Returns the size of an array or a map. Returns -1 if null.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> size(<span class="keyword">array</span>(<span class="string">'b'</span>, <span class="string">'d'</span>, <span class="string">'c'</span>, <span class="string">'a'</span>));</span><br><span class="line"> <span class="number">4</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="skewness"><a href="#skewness" class="headerlink" title="skewness"></a>skewness</h2><p>skewness(expr) - Returns the skewness value calculated from values of a group.</p>
<h2 id="smallint"><a href="#smallint" class="headerlink" title="smallint"></a>smallint</h2><p>smallint(expr) - Casts the valueexprto the target data typesmallint.</p>
<h2 id="sort-array"><a href="#sort-array" class="headerlink" title="sort_array"></a>sort_array</h2><p>sort_array(array[, ascendingOrder]) - Sorts the input array in ascending or descending order according to the natural ordering of the array elements.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> sort_array(<span class="keyword">array</span>(<span class="string">'b'</span>, <span class="string">'d'</span>, <span class="string">'c'</span>, <span class="string">'a'</span>), <span class="literal">true</span>);</span><br><span class="line"> ["a","b","c","d"]</span><br></pre></td></tr></tbody></table></figure>



<h2 id="soundex"><a href="#soundex" class="headerlink" title="soundex"></a>soundex</h2><p>soundex(str) - Returns Soundex code of the string.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> soundex(<span class="string">'Miller'</span>);</span><br><span class="line"> M460</span><br></pre></td></tr></tbody></table></figure>



<h2 id="space"><a href="#space" class="headerlink" title="space"></a>space</h2><p>space(n) - Returns a string consisting ofnspaces.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> concat(space(<span class="number">2</span>), <span class="string">'1'</span>);</span><br><span class="line">  <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="spark-partition-id"><a href="#spark-partition-id" class="headerlink" title="spark_partition_id"></a>spark_partition_id</h2><p>spark_partition_id() - Returns the current partition id.</p>
<h2 id="split"><a href="#split" class="headerlink" title="split"></a>split</h2><p>split(str, regex) - Splitsstraround occurrences that matchregex.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> split(<span class="string">'oneAtwoBthreeC'</span>, <span class="string">'[ABC]'</span>);</span><br><span class="line"> ["one","two","three",""]</span><br></pre></td></tr></tbody></table></figure>



<h2 id="sqrt"><a href="#sqrt" class="headerlink" title="sqrt"></a>sqrt</h2><p>sqrt(expr) - Returns the square root ofexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">sqrt</span>(<span class="number">4</span>);</span><br><span class="line"> <span class="number">2.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="stack"><a href="#stack" class="headerlink" title="stack"></a>stack</h2><p>stack(n,  expr1 , …, exprk) - Separates expr1 , …,exprkintonrows.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> stack(<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"> <span class="number">1</span> <span class="number">2</span></span><br><span class="line"> <span class="number">3</span> <span class="keyword">NULL</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="std"><a href="#std" class="headerlink" title="std"></a>std</h2><p>std(expr) - Returns the sample standard deviation calculated from values of a group.</p>
<h2 id="stddev"><a href="#stddev" class="headerlink" title="stddev"></a>stddev</h2><p>stddev(expr) - Returns the sample standard deviation calculated from values of a group.</p>
<h2 id="stddev-pop"><a href="#stddev-pop" class="headerlink" title="stddev_pop"></a>stddev_pop</h2><p>stddev_pop(expr) - Returns the population standard deviation calculated from values of a group.</p>
<h2 id="stddev-samp"><a href="#stddev-samp" class="headerlink" title="stddev_samp"></a>stddev_samp</h2><p>stddev_samp(expr) - Returns the sample standard deviation calculated from values of a group.</p>
<h2 id="str-to-map"><a href="#str-to-map" class="headerlink" title="str_to_map"></a>str_to_map</h2><p>str_to_map(text[, pairDelim[, keyValueDelim]]) - Creates a map after splitting the text into key/value pairs using delimiters. Default delimiters are ‘,’ forpairDelimand ‘:’ forkeyValueDelim.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> str_to_map(<span class="string">'a:1,b:2,c:3'</span>, <span class="string">','</span>, <span class="string">':'</span>);</span><br><span class="line"> map("a":"1","b":"2","c":"3")</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> str_to_map(<span class="string">'a'</span>);</span><br><span class="line"> map("a":<span class="keyword">null</span>)</span><br></pre></td></tr></tbody></table></figure>



<h2 id="string"><a href="#string" class="headerlink" title="string"></a>string</h2><p>string(expr) - Casts the valueexprto the target data typestring.</p>
<h2 id="struct"><a href="#struct" class="headerlink" title="struct"></a>struct</h2><p>struct(col1, col2, col3, …) - Creates a struct with the given field values.</p>
<h2 id="substr"><a href="#substr" class="headerlink" title="substr"></a>substr</h2><p>substr(str, pos[, len]) - Returns the substring ofstrthat starts atposand is of lengthlen, or the slice of byte array that starts atposand is of lengthlen.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> substr(<span class="string">'Spark SQL'</span>, <span class="number">5</span>);</span><br><span class="line"> k <span class="keyword">SQL</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> substr(<span class="string">'Spark SQL'</span>, <span class="number">-3</span>);</span><br><span class="line"> <span class="keyword">SQL</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> substr(<span class="string">'Spark SQL'</span>, <span class="number">5</span>, <span class="number">1</span>);</span><br><span class="line"> k</span><br></pre></td></tr></tbody></table></figure>



<h2 id="substring"><a href="#substring" class="headerlink" title="substring"></a>substring</h2><p>substring(str, pos[, len]) - Returns the substring ofstrthat starts atposand is of lengthlen, or the slice of byte array that starts atposand is of lengthlen.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">substring</span>(<span class="string">'Spark SQL'</span>, <span class="number">5</span>);</span><br><span class="line"> k <span class="keyword">SQL</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">substring</span>(<span class="string">'Spark SQL'</span>, <span class="number">-3</span>);</span><br><span class="line"> <span class="keyword">SQL</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">substring</span>(<span class="string">'Spark SQL'</span>, <span class="number">5</span>, <span class="number">1</span>);</span><br><span class="line"> k</span><br></pre></td></tr></tbody></table></figure>



<h2 id="substring-index"><a href="#substring-index" class="headerlink" title="substring_index"></a>substring_index</h2><p>substring_index(str, delim, count) - Returns the substring fromstrbeforecountoccurrences of the delimiterdelim. Ifcountis positive, everything to the left of the final delimiter (counting from the left) is returned. Ifcountis negative, everything to the right of the final delimiter (counting from the right) is returned. The function substring_index performs a case-sensitive match when searching fordelim.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> substring_index(<span class="string">'www.apache.org'</span>, <span class="string">'.'</span>, <span class="number">2</span>);</span><br><span class="line">www.apache</span><br></pre></td></tr></tbody></table></figure>



<h2 id="sum"><a href="#sum" class="headerlink" title="sum"></a>sum</h2><p>sum(expr) - Returns the sum calculated from values of a group.</p>
<h2 id="tan"><a href="#tan" class="headerlink" title="tan"></a>tan</h2><p>tan(expr) - Returns the tangent ofexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">tan</span>(<span class="number">0</span>);</span><br><span class="line"> <span class="number">0.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="tanh"><a href="#tanh" class="headerlink" title="tanh"></a>tanh</h2><p>tanh(expr) - Returns the hyperbolic tangent ofexpr.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">tanh</span>(<span class="number">0</span>);</span><br><span class="line"> <span class="number">0.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="timestamp"><a href="#timestamp" class="headerlink" title="timestamp"></a>timestamp</h2><p>timestamp(expr) - Casts the valueexprto the target data typetimestamp.</p>
<h2 id="tinyint"><a href="#tinyint" class="headerlink" title="tinyint"></a>tinyint</h2><p>tinyint(expr) - Casts the valueexprto the target data typetinyint.</p>
<h2 id="to-date"><a href="#to-date" class="headerlink" title="to_date"></a>to_date</h2><p>to_date(date_str[, fmt]) - Parses thedate_strexpression with thefmtexpression to a date. Returns null with invalid input. By default, it follows casting rules to a date if thefmtis omitted.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> to_date(<span class="string">'2009-07-30 04:17:52'</span>);</span><br><span class="line"> <span class="number">2009</span><span class="number">-07</span><span class="number">-30</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> to_date(<span class="string">'2016-12-31'</span>, <span class="string">'yyyy-MM-dd'</span>);</span><br><span class="line"> <span class="number">2016</span><span class="number">-12</span><span class="number">-31</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="to-json"><a href="#to-json" class="headerlink" title="to_json"></a>to_json</h2><p>to_json(expr[, options]) - Returns a json string with a given struct value</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> to_json(named_struct(<span class="string">'a'</span>, <span class="number">1</span>, <span class="string">'b'</span>, <span class="number">2</span>));</span><br><span class="line"> {"a":<span class="number">1</span>,"b":<span class="number">2</span>}</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> to_json(named_struct(<span class="string">'time'</span>, to_timestamp(<span class="string">'2015-08-26'</span>, <span class="string">'yyyy-MM-dd'</span>)), map(<span class="string">'timestampFormat'</span>, <span class="string">'dd/MM/yyyy'</span>));</span><br><span class="line"> {"time":"26/08/2015"}</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> to_json(<span class="keyword">array</span>(named_struct(<span class="string">'a'</span>, <span class="number">1</span>, <span class="string">'b'</span>, <span class="number">2</span>));</span><br><span class="line"> [{"a":<span class="number">1</span>,"b":<span class="number">2</span>}]</span><br></pre></td></tr></tbody></table></figure>



<p>Since:2.2.0</p>
<h2 id="to-timestamp"><a href="#to-timestamp" class="headerlink" title="to_timestamp"></a>to_timestamp</h2><p>to_timestamp(timestamp[, fmt]) - Parses thetimestampexpression with thefmtexpression to a timestamp. Returns null with invalid input. By default, it follows casting rules to a timestamp if thefmtis omitted.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> to_timestamp(<span class="string">'2016-12-31 00:12:00'</span>);</span><br><span class="line"> <span class="number">2016</span><span class="number">-12</span><span class="number">-31</span> <span class="number">00</span>:<span class="number">12</span>:<span class="number">00</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> to_timestamp(<span class="string">'2016-12-31'</span>, <span class="string">'yyyy-MM-dd'</span>);</span><br><span class="line"> <span class="number">2016</span><span class="number">-12</span><span class="number">-31</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="to-unix-timestamp"><a href="#to-unix-timestamp" class="headerlink" title="to_unix_timestamp"></a>to_unix_timestamp</h2><p>to_unix_timestamp(expr[, pattern]) - Returns the UNIX timestamp of the given time.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> to_unix_timestamp(<span class="string">'2016-04-08'</span>, <span class="string">'yyyy-MM-dd'</span>);</span><br><span class="line"> <span class="number">1460041200</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="to-utc-timestamp"><a href="#to-utc-timestamp" class="headerlink" title="to_utc_timestamp"></a>to_utc_timestamp</h2><p>to_utc_timestamp(timestamp, timezone) - Given a timestamp, which corresponds to a certain time of day in the given timezone, returns another timestamp that corresponds to the same time of day in UTC.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> to_utc_timestamp(<span class="string">'2016-08-31'</span>, <span class="string">'Asia/Seoul'</span>);</span><br><span class="line"> <span class="number">2016</span><span class="number">-08</span><span class="number">-30</span> <span class="number">15</span>:<span class="number">00</span>:<span class="number">00</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="translate"><a href="#translate" class="headerlink" title="translate"></a>translate</h2><p>translate(input, from, to) - Translates theinputstring by replacing the characters present in thefromstring with the corresponding characters in thetostring.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">translate</span>(<span class="string">'AaBbCc'</span>, <span class="string">'abc'</span>, <span class="string">'123'</span>);</span><br><span class="line"> A1B2C3</span><br></pre></td></tr></tbody></table></figure>



<h2 id="trim"><a href="#trim" class="headerlink" title="trim"></a>trim</h2><p>trim(str) - Removes the leading and trailing space characters fromstr.</p>
<p>示例</p>
<figure class="highlight plaintext"><figcaption><span>SELECT trim('  SparkSQL  ');</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; SELECT trim('  SparkSQL  ');</span><br><span class="line"> SparkSQL</span><br></pre></td></tr></tbody></table></figure>

<h2 id="trunc"><a href="#trunc" class="headerlink" title="trunc"></a>trunc</h2><p>trunc(date, fmt) - Returnsdatewith the time portion of the day truncated to the unit specified by the format modelfmt.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> trunc(<span class="string">'2009-02-12'</span>, <span class="string">'MM'</span>);</span><br><span class="line"> <span class="number">2009</span><span class="number">-02</span><span class="number">-01</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> trunc(<span class="string">'2015-10-27'</span>, <span class="string">'YEAR'</span>);</span><br><span class="line"> <span class="number">2015</span><span class="number">-01</span><span class="number">-01</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="ucase"><a href="#ucase" class="headerlink" title="ucase"></a>ucase</h2><p>ucase(str) - Returnsstrwith all characters changed to uppercase.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> ucase(<span class="string">'SparkSql'</span>);</span><br><span class="line"> SPARKSQL</span><br></pre></td></tr></tbody></table></figure>



<h2 id="unbase64"><a href="#unbase64" class="headerlink" title="unbase64"></a>unbase64</h2><p>unbase64(str) - Converts the argument from a base 64 stringstrto a binary.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> unbase64(<span class="string">'U3BhcmsgU1FM'</span>);</span><br><span class="line"> Spark <span class="keyword">SQL</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="unhex"><a href="#unhex" class="headerlink" title="unhex"></a>unhex</h2><p>unhex(expr) - Converts hexadecimalexprto binary.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> decode(unhex(<span class="string">'537061726B2053514C'</span>), <span class="string">'UTF-8'</span>);</span><br><span class="line"> Spark <span class="keyword">SQL</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="unix-timestamp"><a href="#unix-timestamp" class="headerlink" title="unix_timestamp"></a>unix_timestamp</h2><p>unix_timestamp([expr[, pattern]]) - Returns the UNIX timestamp of current or specified time.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> unix_timestamp();</span><br><span class="line"> <span class="number">1476884637</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> unix_timestamp(<span class="string">'2016-04-08'</span>, <span class="string">'yyyy-MM-dd'</span>);</span><br><span class="line"> <span class="number">1460041200</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="upper"><a href="#upper" class="headerlink" title="upper"></a>upper</h2><p>upper(str) - Returnsstrwith all characters changed to uppercase.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">upper</span>(<span class="string">'SparkSql'</span>);</span><br><span class="line"> SPARKSQL</span><br></pre></td></tr></tbody></table></figure>



<h2 id="uuid"><a href="#uuid" class="headerlink" title="uuid"></a>uuid</h2><p>uuid() - Returns an universally unique identifier (UUID) string. The value is returned as a canonical UUID 36-character string.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> uuid();</span><br><span class="line"> <span class="number">46707</span>d92<span class="number">-02</span>f4<span class="number">-4817</span><span class="number">-8116</span><span class="operator">-</span>a4c3b23e6266</span><br></pre></td></tr></tbody></table></figure>



<h2 id="var-pop"><a href="#var-pop" class="headerlink" title="var_pop"></a>var_pop</h2><p>var_pop(expr) - Returns the population variance calculated from values of a group.</p>
<h2 id="var-samp"><a href="#var-samp" class="headerlink" title="var_samp"></a>var_samp</h2><p>var_samp(expr) - Returns the sample variance calculated from values of a group.</p>
<h2 id="variance"><a href="#variance" class="headerlink" title="variance"></a>variance</h2><p>variance(expr) - Returns the sample variance calculated from values of a group.</p>
<h2 id="weekofyear"><a href="#weekofyear" class="headerlink" title="weekofyear"></a>weekofyear</h2><p>weekofyear(date) - Returns the week of the year of the given date. A week is considered to start on a Monday and week 1 is the first week with &gt;3 days.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> weekofyear(<span class="string">'2008-02-20'</span>);</span><br><span class="line"> <span class="number">8</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="when"><a href="#when" class="headerlink" title="when"></a>when</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CASE</span> <span class="keyword">WHEN</span>  expr1  <span class="keyword">THEN</span>  expr2  [<span class="keyword">WHEN</span>  expr3  <span class="keyword">THEN</span>  expr4 ] [<span class="keyword">ELSE</span>  expr5 ] <span class="keyword">END</span> </span><br><span class="line"><span class="keyword">When</span> expr1 <span class="operator">=</span> <span class="literal">true</span>, <span class="keyword">returns</span> expr2 ; <span class="keyword">when</span> expr3 <span class="operator">=</span> <span class="literal">true</span>, <span class="keyword">return</span> expr4 ; <span class="keyword">else</span> <span class="keyword">return</span> expr5 .</span><br></pre></td></tr></tbody></table></figure>



<h2 id="window"><a href="#window" class="headerlink" title="window"></a>window</h2><h2 id="xpath"><a href="#xpath" class="headerlink" title="xpath"></a>xpath</h2><p>xpath(xml, xpath) - Returns a string array of values within the nodes of xml that match the XPath expression.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> xpath(<span class="string">'b1b2b3c1c2'</span>,<span class="string">'a/b/text()'</span>);</span><br><span class="line"> [<span class="string">'b1'</span>,<span class="string">'b2'</span>,<span class="string">'b3'</span>]</span><br></pre></td></tr></tbody></table></figure>



<h2 id="xpath-boolean"><a href="#xpath-boolean" class="headerlink" title="xpath_boolean"></a>xpath_boolean</h2><p>xpath_boolean(xml, xpath) - Returns true if the XPath expression evaluates to true, or if a matching node is found.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> xpath_boolean(<span class="string">'1'</span>,<span class="string">'a/b'</span>);</span><br><span class="line"> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="xpath-double"><a href="#xpath-double" class="headerlink" title="xpath_double"></a>xpath_double</h2><p>xpath_double(xml, xpath) - Returns a double value, the value zero if no match is found, or NaN if a match is found but the value is non-numeric.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> xpath_double(<span class="string">'12'</span>, <span class="string">'sum(a/b)'</span>);</span><br><span class="line"> <span class="number">3.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="xpath-float"><a href="#xpath-float" class="headerlink" title="xpath_float"></a>xpath_float</h2><p>xpath_float(xml, xpath) - Returns a float value, the value zero if no match is found, or NaN if a match is found but the value is non-numeric.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> xpath_float(<span class="string">'12'</span>, <span class="string">'sum(a/b)'</span>);</span><br><span class="line"> <span class="number">3.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="xpath-int"><a href="#xpath-int" class="headerlink" title="xpath_int"></a>xpath_int</h2><p>xpath_int(xml, xpath) - Returns an integer value, or the value zero if no match is found, or a match is found but the value is non-numeric.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> xpath_int(<span class="string">'12'</span>, <span class="string">'sum(a/b)'</span>);</span><br><span class="line"> <span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="xpath-long"><a href="#xpath-long" class="headerlink" title="xpath_long"></a>xpath_long</h2><p>xpath_long(xml, xpath) - Returns a long integer value, or the value zero if no match is found, or a match is found but the value is non-numeric.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> xpath_long(<span class="string">'12'</span>, <span class="string">'sum(a/b)'</span>);</span><br><span class="line"> <span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="xpath-number"><a href="#xpath-number" class="headerlink" title="xpath_number"></a>xpath_number</h2><p>xpath_number(xml, xpath) - Returns a double value, the value zero if no match is found, or NaN if a match is found but the value is non-numeric.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> xpath_number(<span class="string">'12'</span>, <span class="string">'sum(a/b)'</span>);</span><br><span class="line"> <span class="number">3.0</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="xpath-short"><a href="#xpath-short" class="headerlink" title="xpath_short"></a>xpath_short</h2><p>xpath_short(xml, xpath) - Returns a short integer value, or the value zero if no match is found, or a match is found but the value is non-numeric.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> xpath_short(<span class="string">'12'</span>, <span class="string">'sum(a/b)'</span>);</span><br><span class="line"> <span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="xpath-string"><a href="#xpath-string" class="headerlink" title="xpath_string"></a>xpath_string</h2><p>xpath_string(xml, xpath) - Returns the text contents of the first xml node that matches the XPath expression.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> xpath_string(<span class="string">'bcc'</span>,<span class="string">'a/c'</span>);</span><br><span class="line">cc</span><br></pre></td></tr></tbody></table></figure>



<h2 id="year"><a href="#year" class="headerlink" title="year"></a>year</h2><p>year(date) - Returns the year component of the date/timestamp.</p>
<p>示例</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">year</span>(<span class="string">'2016-07-30'</span>);</span><br><span class="line"><span class="number">2016</span></span><br></pre></td></tr></tbody></table></figure>


                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">hnbian</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://www.hnbian.cn/posts/2d882023.html">https://www.hnbian.cn/posts/2d882023.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">hnbian</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/spark/">
                                    <span class="chip bg-color">spark</span>
                                </a>
                            
                                <a href="/tags/spark-sql/">
                                    <span class="chip bg-color">spark sql</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'h1rND3bHC0OqFwzm1UfPQpaY-gzGzoHsz',
        appKey: 'd7uboDt2WLV2HJCEMHkkLuU4',
        serverURLs: '',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'identicon',
        pageSize: '12',
        lang: 'zh-cn',
        placeholder: 'just go go'
    });
</script>

<!--酷Q推送-->


    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/5dbcf621.html">
                    <div class="card-image">
                        
                        <img src="https://images.hnbian.cn/FnFnlMFk04dYUv0rL48JSB07S28G" class="responsive-img" alt="Spark ML 2.管道与工作流">
                        
                        <span class="card-title">Spark ML 2.管道与工作流</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2018-12-03
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/spark/" class="post-category">
                                    spark
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/spark/">
                        <span class="chip bg-color">spark</span>
                    </a>
                    
                    <a href="/tags/spark-ml/">
                        <span class="chip bg-color">spark ml</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/85d00d.html">
                    <div class="card-image">
                        
                        <img src="http://images.hnbian.cn//Fk7nGHjWbnXZlkbbxOtCTTAEWkS2" class="responsive-img" alt="SparkSQL读取HBase数据">
                        
                        <span class="card-title">SparkSQL读取HBase数据</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2018-09-11
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/spark/" class="post-category">
                                    spark
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/spark/">
                        <span class="chip bg-color">spark</span>
                    </a>
                    
                    <a href="/tags/spark-sql/">
                        <span class="chip bg-color">spark sql</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: hnbian<br />'
            + '文章作者: hnbian<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4, h5'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2018-2025</span>
            
            <a href="/about" target="_blank">hnbian</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
                <span id="translate">|&nbsp;繁/简：</span><a id="translateLink" href="javascript:translatePage();">繁</a>
            
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2018";
                        var startMonth = "2";
                        var startDate = "8";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // 区分是否有年份.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = '本站已运行 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                daysTip = '本站已運行 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            
                <span id="icp"><img src="/medias/icp.png"
                                    style="vertical-align: text-bottom;"/>
                <a href="https://beian.miit.gov.cn" target="_blank">粤ICP备18156920号-2</a>
            </span>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/hnbian" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:hnbian@126.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
        <script type="text/javascript" src="/js/tw_cn.js"></script>
        <script type="text/javascript">
          var defaultEncoding = 2; //网站编写字体是否繁体，1-繁体，2-简体
          var translateDelay = 0; //延迟时间,若不在前, 要设定延迟翻译时间, 如100表示100ms,默认为0
          var cookieDomain = "https://www.hnbian.cn"; //Cookie地址, 一定要设定, 通常为你的网址
          var msgToTraditionalChinese = "繁"; //此处可以更改为你想要显示的文字
          var msgToSimplifiedChinese = "简"; //同上，但两处均不建议更改
          var translateButtonId = "translateLink"; //默认互换id
          translateInitilization();
        </script>
    
    
    

    <!-- 雪花特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/snow.js"><\/script>');
            }
        </script>
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
